<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="李博的博客">
    <meta name="keyword" content="striveliboo">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        【keepalived】Keepalived配置及示例 - Liboo的博客 | Liboo&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Internet of Everything, Everywhere. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg">
        </div>
        <div class="name">
            <i>H2K1E~ACE</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#keepalived-简介"><span class="toc-text">keepalived 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keepalived-源码下载地址"><span class="toc-text">keepalived 源码下载地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keepalived-官网"><span class="toc-text">keepalived 官网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL、Redis、ActiveMQ-高可用简单配置"><span class="toc-text">MySQL、Redis、ActiveMQ 高可用简单配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keepalived-配置手册"><span class="toc-text">keepalived 配置手册</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> Internet of Everything, Everywhere. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        【keepalived】Keepalived配置及示例
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-03-21 09:07:03</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#keepalived" title="keepalived">keepalived</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>

    </div>
    <div class="post-content ">
        <h3 id="keepalived-简介"><a href="#keepalived-简介" class="headerlink" title="keepalived 简介"></a>keepalived 简介</h3><p>Keepalived的作用是检测服务器的状态，如果有一台web服务器宕机，或工作出现故障，Keepalived将检测到，并将有故障的服务器从系统中剔除，同时使用其他服务器代替该服务器的工作，当服务器工作正常后Keepalived自动将服务器加入到服务器群中，这些工作全部自动完成，不需要人工干涉，需要人工做的只是修复故障的服务器。</p>
<h3 id="keepalived-源码下载地址"><a href="#keepalived-源码下载地址" class="headerlink" title="keepalived 源码下载地址"></a>keepalived 源码下载地址</h3><p><a href="https://www.keepalived.org/software/" target="_blank" rel="noopener">keepalived software</a></p>
<h3 id="keepalived-官网"><a href="#keepalived-官网" class="headerlink" title="keepalived 官网"></a>keepalived 官网</h3><p><a href="https://www.keepalived.org/index.html" target="_blank" rel="noopener">Keepalived for Linux</a></p>
<h3 id="MySQL、Redis、ActiveMQ-高可用简单配置"><a href="#MySQL、Redis、ActiveMQ-高可用简单配置" class="headerlink" title="MySQL、Redis、ActiveMQ 高可用简单配置"></a>MySQL、Redis、ActiveMQ 高可用简单配置</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost keepalived]# vi keepalived.conf</span><br><span class="line"></span><br><span class="line">! Configuration File <span class="keyword">for</span> keepalived</span><br><span class="line">global_defs &#123;</span><br><span class="line">   #notification_email &#123;</span><br><span class="line">        #aaa@email.com</span><br><span class="line">   #&#125;</span><br><span class="line">   #notification_email_from keepalived@email.com</span><br><span class="line">   #smtp_server 127.0.0.1</span><br><span class="line">   #smtp_connect_timeout 30</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_track_process mysql &#123;</span><br><span class="line">  process <span class="string">"mysqld"</span></span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance mysql &#123;</span><br><span class="line">    state BACKUP</span><br><span class="line">    nopreempt</span><br><span class="line">   <span class="built_in"> interface </span>ens160</span><br><span class="line">    virtual_router_id 61</span><br><span class="line">    track_process&#123;</span><br><span class="line">		mysql</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.1.2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_track_process redis &#123;</span><br><span class="line">  process <span class="string">"redis-server"</span></span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance redis &#123;</span><br><span class="line">    state BACKUP</span><br><span class="line">    nopreempt</span><br><span class="line">   <span class="built_in"> interface </span>ens160</span><br><span class="line">    virtual_router_id 62</span><br><span class="line">    track_process&#123;</span><br><span class="line">		redis</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.1.3</span><br><span class="line">    &#125;</span><br><span class="line">    notify_master <span class="string">"/home/admin/redis/bin/redis-cli slaveof no one"</span></span><br><span class="line">    notify_backup <span class="string">"/home/admin/redis/bin/redis-cli slaveof 192.168.1.191 6379"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_script activemq &#123;</span><br><span class="line"> <span class="built_in"> script </span><span class="string">"/bin/activemq status"</span></span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance activemq &#123;</span><br><span class="line">    state BACKUP</span><br><span class="line">    nopreempt</span><br><span class="line">   <span class="built_in"> interface </span>ens160</span><br><span class="line">    virtual_router_id 63</span><br><span class="line">    track_script&#123;</span><br><span class="line">		activemq</span><br><span class="line">    &#125;</span><br><span class="line">    virtual_ipaddress &#123;</span><br><span class="line">        192.168.1.4</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="keepalived-配置手册"><a href="#keepalived-配置手册" class="headerlink" title="keepalived 配置手册"></a>keepalived 配置手册</h3><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br><span class="line">1233</span><br><span class="line">1234</span><br><span class="line">1235</span><br><span class="line">1236</span><br><span class="line">1237</span><br><span class="line">1238</span><br><span class="line">1239</span><br><span class="line">1240</span><br><span class="line">1241</span><br><span class="line">1242</span><br><span class="line">1243</span><br><span class="line">1244</span><br><span class="line">1245</span><br><span class="line">1246</span><br><span class="line">1247</span><br><span class="line">1248</span><br><span class="line">1249</span><br><span class="line">1250</span><br><span class="line">1251</span><br><span class="line">1252</span><br><span class="line">1253</span><br><span class="line">1254</span><br><span class="line">1255</span><br><span class="line">1256</span><br><span class="line">1257</span><br><span class="line">1258</span><br><span class="line">1259</span><br><span class="line">1260</span><br><span class="line">1261</span><br><span class="line">1262</span><br><span class="line">1263</span><br><span class="line">1264</span><br><span class="line">1265</span><br><span class="line">1266</span><br><span class="line">1267</span><br><span class="line">1268</span><br><span class="line">1269</span><br><span class="line">1270</span><br><span class="line">1271</span><br><span class="line">1272</span><br><span class="line">1273</span><br><span class="line">1274</span><br><span class="line">1275</span><br><span class="line">1276</span><br><span class="line">1277</span><br><span class="line">1278</span><br><span class="line">1279</span><br><span class="line">1280</span><br><span class="line">1281</span><br><span class="line">1282</span><br><span class="line">1283</span><br><span class="line">1284</span><br><span class="line">1285</span><br><span class="line">1286</span><br><span class="line">1287</span><br><span class="line">1288</span><br><span class="line">1289</span><br><span class="line">1290</span><br><span class="line">1291</span><br><span class="line">1292</span><br><span class="line">1293</span><br><span class="line">1294</span><br><span class="line">1295</span><br><span class="line">1296</span><br><span class="line">1297</span><br><span class="line">1298</span><br><span class="line">1299</span><br><span class="line">1300</span><br><span class="line">1301</span><br><span class="line">1302</span><br><span class="line">1303</span><br><span class="line">1304</span><br><span class="line">1305</span><br><span class="line">1306</span><br><span class="line">1307</span><br><span class="line">1308</span><br><span class="line">1309</span><br><span class="line">1310</span><br><span class="line">1311</span><br><span class="line">1312</span><br><span class="line">1313</span><br><span class="line">1314</span><br><span class="line">1315</span><br><span class="line">1316</span><br><span class="line">1317</span><br><span class="line">1318</span><br><span class="line">1319</span><br><span class="line">1320</span><br><span class="line">1321</span><br><span class="line">1322</span><br><span class="line">1323</span><br><span class="line">1324</span><br><span class="line">1325</span><br><span class="line">1326</span><br><span class="line">1327</span><br><span class="line">1328</span><br><span class="line">1329</span><br><span class="line">1330</span><br><span class="line">1331</span><br><span class="line">1332</span><br><span class="line">1333</span><br><span class="line">1334</span><br><span class="line">1335</span><br><span class="line">1336</span><br><span class="line">1337</span><br><span class="line">1338</span><br><span class="line">1339</span><br><span class="line">1340</span><br><span class="line">1341</span><br><span class="line">1342</span><br><span class="line">1343</span><br><span class="line">1344</span><br><span class="line">1345</span><br><span class="line">1346</span><br><span class="line">1347</span><br><span class="line">1348</span><br><span class="line">1349</span><br><span class="line">1350</span><br><span class="line">1351</span><br><span class="line">1352</span><br><span class="line">1353</span><br><span class="line">1354</span><br><span class="line">1355</span><br><span class="line">1356</span><br><span class="line">1357</span><br><span class="line">1358</span><br><span class="line">1359</span><br><span class="line">1360</span><br><span class="line">1361</span><br><span class="line">1362</span><br><span class="line">1363</span><br><span class="line">1364</span><br><span class="line">1365</span><br><span class="line">1366</span><br><span class="line">1367</span><br><span class="line">1368</span><br><span class="line">1369</span><br><span class="line">1370</span><br><span class="line">1371</span><br><span class="line">1372</span><br><span class="line">1373</span><br><span class="line">1374</span><br><span class="line">1375</span><br><span class="line">1376</span><br><span class="line">1377</span><br><span class="line">1378</span><br><span class="line">1379</span><br><span class="line">1380</span><br><span class="line">1381</span><br><span class="line">1382</span><br><span class="line">1383</span><br><span class="line">1384</span><br><span class="line">1385</span><br><span class="line">1386</span><br><span class="line">1387</span><br><span class="line">1388</span><br><span class="line">1389</span><br><span class="line">1390</span><br><span class="line">1391</span><br><span class="line">1392</span><br><span class="line">1393</span><br><span class="line">1394</span><br><span class="line">1395</span><br><span class="line">1396</span><br><span class="line">1397</span><br><span class="line">1398</span><br><span class="line">1399</span><br><span class="line">1400</span><br><span class="line">1401</span><br><span class="line">1402</span><br><span class="line">1403</span><br><span class="line">1404</span><br><span class="line">1405</span><br><span class="line">1406</span><br><span class="line">1407</span><br><span class="line">1408</span><br><span class="line">1409</span><br><span class="line">1410</span><br><span class="line">1411</span><br><span class="line">1412</span><br><span class="line">1413</span><br><span class="line">1414</span><br><span class="line">1415</span><br><span class="line">1416</span><br><span class="line">1417</span><br><span class="line">1418</span><br><span class="line">1419</span><br><span class="line">1420</span><br><span class="line">1421</span><br><span class="line">1422</span><br><span class="line">1423</span><br><span class="line">1424</span><br><span class="line">1425</span><br><span class="line">1426</span><br><span class="line">1427</span><br><span class="line">1428</span><br><span class="line">1429</span><br><span class="line">1430</span><br><span class="line">1431</span><br><span class="line">1432</span><br><span class="line">1433</span><br><span class="line">1434</span><br><span class="line">1435</span><br><span class="line">1436</span><br><span class="line">1437</span><br><span class="line">1438</span><br><span class="line">1439</span><br><span class="line">1440</span><br><span class="line">1441</span><br><span class="line">1442</span><br><span class="line">1443</span><br><span class="line">1444</span><br><span class="line">1445</span><br><span class="line">1446</span><br><span class="line">1447</span><br><span class="line">1448</span><br><span class="line">1449</span><br><span class="line">1450</span><br><span class="line">1451</span><br><span class="line">1452</span><br><span class="line">1453</span><br><span class="line">1454</span><br><span class="line">1455</span><br><span class="line">1456</span><br><span class="line">1457</span><br><span class="line">1458</span><br><span class="line">1459</span><br><span class="line">1460</span><br><span class="line">1461</span><br><span class="line">1462</span><br><span class="line">1463</span><br><span class="line">1464</span><br><span class="line">1465</span><br><span class="line">1466</span><br><span class="line">1467</span><br><span class="line">1468</span><br><span class="line">1469</span><br><span class="line">1470</span><br><span class="line">1471</span><br><span class="line">1472</span><br><span class="line">1473</span><br><span class="line">1474</span><br><span class="line">1475</span><br><span class="line">1476</span><br><span class="line">1477</span><br><span class="line">1478</span><br><span class="line">1479</span><br><span class="line">1480</span><br><span class="line">1481</span><br><span class="line">1482</span><br><span class="line">1483</span><br><span class="line">1484</span><br><span class="line">1485</span><br><span class="line">1486</span><br><span class="line">1487</span><br><span class="line">1488</span><br><span class="line">1489</span><br><span class="line">1490</span><br><span class="line">1491</span><br><span class="line">1492</span><br><span class="line">1493</span><br><span class="line">1494</span><br><span class="line">1495</span><br><span class="line">1496</span><br><span class="line">1497</span><br><span class="line">1498</span><br><span class="line">1499</span><br><span class="line">1500</span><br><span class="line">1501</span><br><span class="line">1502</span><br><span class="line">1503</span><br><span class="line">1504</span><br><span class="line">1505</span><br><span class="line">1506</span><br><span class="line">1507</span><br><span class="line">1508</span><br><span class="line">1509</span><br><span class="line">1510</span><br><span class="line">1511</span><br><span class="line">1512</span><br><span class="line">1513</span><br><span class="line">1514</span><br><span class="line">1515</span><br><span class="line">1516</span><br><span class="line">1517</span><br><span class="line">1518</span><br><span class="line">1519</span><br><span class="line">1520</span><br><span class="line">1521</span><br><span class="line">1522</span><br><span class="line">1523</span><br><span class="line">1524</span><br><span class="line">1525</span><br><span class="line">1526</span><br><span class="line">1527</span><br><span class="line">1528</span><br><span class="line">1529</span><br><span class="line">1530</span><br><span class="line">1531</span><br><span class="line">1532</span><br><span class="line">1533</span><br><span class="line">1534</span><br><span class="line">1535</span><br><span class="line">1536</span><br><span class="line">1537</span><br><span class="line">1538</span><br><span class="line">1539</span><br><span class="line">1540</span><br><span class="line">1541</span><br><span class="line">1542</span><br><span class="line">1543</span><br><span class="line">1544</span><br><span class="line">1545</span><br><span class="line">1546</span><br><span class="line">1547</span><br><span class="line">1548</span><br><span class="line">1549</span><br><span class="line">1550</span><br><span class="line">1551</span><br><span class="line">1552</span><br><span class="line">1553</span><br><span class="line">1554</span><br><span class="line">1555</span><br><span class="line">1556</span><br><span class="line">1557</span><br><span class="line">1558</span><br><span class="line">1559</span><br><span class="line">1560</span><br><span class="line">1561</span><br><span class="line">1562</span><br><span class="line">1563</span><br><span class="line">1564</span><br><span class="line">1565</span><br><span class="line">1566</span><br><span class="line">1567</span><br><span class="line">1568</span><br><span class="line">1569</span><br><span class="line">1570</span><br><span class="line">1571</span><br><span class="line">1572</span><br><span class="line">1573</span><br><span class="line">1574</span><br><span class="line">1575</span><br><span class="line">1576</span><br><span class="line">1577</span><br><span class="line">1578</span><br><span class="line">1579</span><br><span class="line">1580</span><br><span class="line">1581</span><br><span class="line">1582</span><br><span class="line">1583</span><br><span class="line">1584</span><br><span class="line">1585</span><br><span class="line">1586</span><br><span class="line">1587</span><br><span class="line">1588</span><br><span class="line">1589</span><br><span class="line">1590</span><br><span class="line">1591</span><br><span class="line">1592</span><br><span class="line">1593</span><br><span class="line">1594</span><br><span class="line">1595</span><br><span class="line">1596</span><br><span class="line">1597</span><br><span class="line">1598</span><br><span class="line">1599</span><br><span class="line">1600</span><br><span class="line">1601</span><br><span class="line">1602</span><br><span class="line">1603</span><br><span class="line">1604</span><br><span class="line">1605</span><br><span class="line">1606</span><br><span class="line">1607</span><br><span class="line">1608</span><br><span class="line">1609</span><br><span class="line">1610</span><br><span class="line">1611</span><br><span class="line">1612</span><br><span class="line">1613</span><br><span class="line">1614</span><br><span class="line">1615</span><br><span class="line">1616</span><br><span class="line">1617</span><br><span class="line">1618</span><br><span class="line">1619</span><br><span class="line">1620</span><br><span class="line">1621</span><br><span class="line">1622</span><br><span class="line">1623</span><br><span class="line">1624</span><br><span class="line">1625</span><br><span class="line">1626</span><br><span class="line">1627</span><br><span class="line">1628</span><br><span class="line">1629</span><br><span class="line">1630</span><br><span class="line">1631</span><br><span class="line">1632</span><br><span class="line">1633</span><br><span class="line">1634</span><br><span class="line">1635</span><br><span class="line">1636</span><br><span class="line">1637</span><br><span class="line">1638</span><br><span class="line">1639</span><br><span class="line">1640</span><br><span class="line">1641</span><br><span class="line">1642</span><br><span class="line">1643</span><br><span class="line">1644</span><br><span class="line">1645</span><br><span class="line">1646</span><br><span class="line">1647</span><br><span class="line">1648</span><br><span class="line">1649</span><br><span class="line">1650</span><br><span class="line">1651</span><br><span class="line">1652</span><br><span class="line">1653</span><br><span class="line">1654</span><br><span class="line">1655</span><br><span class="line">1656</span><br><span class="line">1657</span><br><span class="line">1658</span><br><span class="line">1659</span><br><span class="line">1660</span><br><span class="line">1661</span><br><span class="line">1662</span><br><span class="line">1663</span><br><span class="line">1664</span><br><span class="line">1665</span><br><span class="line">1666</span><br><span class="line">1667</span><br><span class="line">1668</span><br><span class="line">1669</span><br><span class="line">1670</span><br><span class="line">1671</span><br><span class="line">1672</span><br><span class="line">1673</span><br><span class="line">1674</span><br><span class="line">1675</span><br><span class="line">1676</span><br><span class="line">1677</span><br><span class="line">1678</span><br><span class="line">1679</span><br><span class="line">1680</span><br><span class="line">1681</span><br><span class="line">1682</span><br><span class="line">1683</span><br><span class="line">1684</span><br><span class="line">1685</span><br><span class="line">1686</span><br><span class="line">1687</span><br><span class="line">1688</span><br><span class="line">1689</span><br><span class="line">1690</span><br><span class="line">1691</span><br><span class="line">1692</span><br><span class="line">1693</span><br><span class="line">1694</span><br><span class="line">1695</span><br><span class="line">1696</span><br><span class="line">1697</span><br><span class="line">1698</span><br><span class="line">1699</span><br><span class="line">1700</span><br><span class="line">1701</span><br><span class="line">1702</span><br><span class="line">1703</span><br><span class="line">1704</span><br><span class="line">1705</span><br><span class="line">1706</span><br><span class="line">1707</span><br><span class="line">1708</span><br><span class="line">1709</span><br><span class="line">1710</span><br><span class="line">1711</span><br><span class="line">1712</span><br><span class="line">1713</span><br><span class="line">1714</span><br><span class="line">1715</span><br><span class="line">1716</span><br><span class="line">1717</span><br><span class="line">1718</span><br><span class="line">1719</span><br><span class="line">1720</span><br><span class="line">1721</span><br><span class="line">1722</span><br><span class="line">1723</span><br><span class="line">1724</span><br><span class="line">1725</span><br><span class="line">1726</span><br><span class="line">1727</span><br><span class="line">1728</span><br><span class="line">1729</span><br><span class="line">1730</span><br><span class="line">1731</span><br><span class="line">1732</span><br><span class="line">1733</span><br><span class="line">1734</span><br><span class="line">1735</span><br><span class="line">1736</span><br><span class="line">1737</span><br><span class="line">1738</span><br><span class="line">1739</span><br><span class="line">1740</span><br><span class="line">1741</span><br><span class="line">1742</span><br><span class="line">1743</span><br><span class="line">1744</span><br><span class="line">1745</span><br><span class="line">1746</span><br><span class="line">1747</span><br><span class="line">1748</span><br><span class="line">1749</span><br><span class="line">1750</span><br><span class="line">1751</span><br><span class="line">1752</span><br><span class="line">1753</span><br><span class="line">1754</span><br><span class="line">1755</span><br><span class="line">1756</span><br><span class="line">1757</span><br><span class="line">1758</span><br><span class="line">1759</span><br><span class="line">1760</span><br><span class="line">1761</span><br><span class="line">1762</span><br><span class="line">1763</span><br><span class="line">1764</span><br><span class="line">1765</span><br><span class="line">1766</span><br><span class="line">1767</span><br><span class="line">1768</span><br><span class="line">1769</span><br><span class="line">1770</span><br><span class="line">1771</span><br><span class="line">1772</span><br><span class="line">1773</span><br><span class="line">1774</span><br><span class="line">1775</span><br><span class="line">1776</span><br><span class="line">1777</span><br><span class="line">1778</span><br><span class="line">1779</span><br><span class="line">1780</span><br><span class="line">1781</span><br><span class="line">1782</span><br><span class="line">1783</span><br><span class="line">1784</span><br><span class="line">1785</span><br><span class="line">1786</span><br><span class="line">1787</span><br><span class="line">1788</span><br><span class="line">1789</span><br><span class="line">1790</span><br><span class="line">1791</span><br><span class="line">1792</span><br><span class="line">1793</span><br><span class="line">1794</span><br><span class="line">1795</span><br><span class="line">1796</span><br><span class="line">1797</span><br><span class="line">1798</span><br><span class="line">1799</span><br><span class="line">1800</span><br><span class="line">1801</span><br><span class="line">1802</span><br><span class="line">1803</span><br><span class="line">1804</span><br><span class="line">1805</span><br><span class="line">1806</span><br><span class="line">1807</span><br><span class="line">1808</span><br><span class="line">1809</span><br><span class="line">1810</span><br><span class="line">1811</span><br><span class="line">1812</span><br><span class="line">1813</span><br><span class="line">1814</span><br><span class="line">1815</span><br><span class="line">1816</span><br><span class="line">1817</span><br><span class="line">1818</span><br><span class="line">1819</span><br><span class="line">1820</span><br><span class="line">1821</span><br><span class="line">1822</span><br><span class="line">1823</span><br><span class="line">1824</span><br><span class="line">1825</span><br><span class="line">1826</span><br><span class="line">1827</span><br><span class="line">1828</span><br><span class="line">1829</span><br><span class="line">1830</span><br><span class="line">1831</span><br><span class="line">1832</span><br><span class="line">1833</span><br><span class="line">1834</span><br><span class="line">1835</span><br><span class="line">1836</span><br><span class="line">1837</span><br><span class="line">1838</span><br><span class="line">1839</span><br><span class="line">1840</span><br><span class="line">1841</span><br><span class="line">1842</span><br><span class="line">1843</span><br><span class="line">1844</span><br><span class="line">1845</span><br><span class="line">1846</span><br><span class="line">1847</span><br><span class="line">1848</span><br><span class="line">1849</span><br><span class="line">1850</span><br><span class="line">1851</span><br><span class="line">1852</span><br><span class="line">1853</span><br><span class="line">1854</span><br><span class="line">1855</span><br><span class="line">1856</span><br><span class="line">1857</span><br><span class="line">1858</span><br><span class="line">1859</span><br><span class="line">1860</span><br><span class="line">1861</span><br><span class="line">1862</span><br><span class="line">1863</span><br><span class="line">1864</span><br><span class="line">1865</span><br><span class="line">1866</span><br><span class="line">1867</span><br><span class="line">1868</span><br><span class="line">1869</span><br><span class="line">1870</span><br><span class="line">1871</span><br><span class="line">1872</span><br><span class="line">1873</span><br><span class="line">1874</span><br><span class="line">1875</span><br><span class="line">1876</span><br><span class="line">1877</span><br><span class="line">1878</span><br><span class="line">1879</span><br><span class="line">1880</span><br><span class="line">1881</span><br><span class="line">1882</span><br><span class="line">1883</span><br><span class="line">1884</span><br><span class="line">1885</span><br><span class="line">1886</span><br><span class="line">1887</span><br><span class="line">1888</span><br><span class="line">1889</span><br><span class="line">1890</span><br><span class="line">1891</span><br><span class="line">1892</span><br><span class="line">1893</span><br><span class="line">1894</span><br><span class="line">1895</span><br><span class="line">1896</span><br><span class="line">1897</span><br><span class="line">1898</span><br><span class="line">1899</span><br><span class="line">1900</span><br><span class="line">1901</span><br><span class="line">1902</span><br><span class="line">1903</span><br><span class="line">1904</span><br><span class="line">1905</span><br><span class="line">1906</span><br><span class="line">1907</span><br><span class="line">1908</span><br><span class="line">1909</span><br><span class="line">1910</span><br><span class="line">1911</span><br><span class="line">1912</span><br><span class="line">1913</span><br><span class="line">1914</span><br><span class="line">1915</span><br><span class="line">1916</span><br><span class="line">1917</span><br><span class="line">1918</span><br><span class="line">1919</span><br><span class="line">1920</span><br><span class="line">1921</span><br><span class="line">1922</span><br><span class="line">1923</span><br><span class="line">1924</span><br><span class="line">1925</span><br><span class="line">1926</span><br><span class="line">1927</span><br><span class="line">1928</span><br><span class="line">1929</span><br><span class="line">1930</span><br><span class="line">1931</span><br><span class="line">1932</span><br><span class="line">1933</span><br><span class="line">1934</span><br><span class="line">1935</span><br><span class="line">1936</span><br><span class="line">1937</span><br><span class="line">1938</span><br><span class="line">1939</span><br><span class="line">1940</span><br><span class="line">1941</span><br><span class="line">1942</span><br><span class="line">1943</span><br><span class="line">1944</span><br><span class="line">1945</span><br><span class="line">1946</span><br><span class="line">1947</span><br><span class="line">1948</span><br><span class="line">1949</span><br><span class="line">1950</span><br><span class="line">1951</span><br><span class="line">1952</span><br><span class="line">1953</span><br><span class="line">1954</span><br><span class="line">1955</span><br><span class="line">1956</span><br><span class="line">1957</span><br><span class="line">1958</span><br><span class="line">1959</span><br><span class="line">1960</span><br><span class="line">1961</span><br><span class="line">1962</span><br><span class="line">1963</span><br><span class="line">1964</span><br><span class="line">1965</span><br><span class="line">1966</span><br><span class="line">1967</span><br><span class="line">1968</span><br><span class="line">1969</span><br><span class="line">1970</span><br><span class="line">1971</span><br><span class="line">1972</span><br><span class="line">1973</span><br><span class="line">1974</span><br><span class="line">1975</span><br><span class="line">1976</span><br><span class="line">1977</span><br><span class="line">1978</span><br><span class="line">1979</span><br><span class="line">1980</span><br><span class="line">1981</span><br><span class="line">1982</span><br><span class="line">1983</span><br><span class="line">1984</span><br><span class="line">1985</span><br><span class="line">1986</span><br><span class="line">1987</span><br><span class="line">1988</span><br><span class="line">1989</span><br><span class="line">1990</span><br><span class="line">1991</span><br><span class="line">1992</span><br><span class="line">1993</span><br><span class="line">1994</span><br><span class="line">1995</span><br><span class="line">1996</span><br><span class="line">1997</span><br><span class="line">1998</span><br><span class="line">1999</span><br><span class="line">2000</span><br><span class="line">2001</span><br><span class="line">2002</span><br><span class="line">2003</span><br><span class="line">2004</span><br><span class="line">2005</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2008</span><br><span class="line">2009</span><br><span class="line">2010</span><br><span class="line">2011</span><br><span class="line">2012</span><br><span class="line">2013</span><br><span class="line">2014</span><br><span class="line">2015</span><br><span class="line">2016</span><br><span class="line">2017</span><br><span class="line">2018</span><br><span class="line">2019</span><br><span class="line">2020</span><br><span class="line">2021</span><br><span class="line">2022</span><br><span class="line">2023</span><br><span class="line">2024</span><br><span class="line">2025</span><br><span class="line">2026</span><br><span class="line">2027</span><br><span class="line">2028</span><br><span class="line">2029</span><br><span class="line">2030</span><br><span class="line">2031</span><br><span class="line">2032</span><br><span class="line">2033</span><br><span class="line">2034</span><br><span class="line">2035</span><br><span class="line">2036</span><br><span class="line">2037</span><br><span class="line">2038</span><br><span class="line">2039</span><br><span class="line">2040</span><br><span class="line">2041</span><br><span class="line">2042</span><br><span class="line">2043</span><br><span class="line">2044</span><br><span class="line">2045</span><br><span class="line">2046</span><br><span class="line">2047</span><br><span class="line">2048</span><br><span class="line">2049</span><br><span class="line">2050</span><br><span class="line">2051</span><br><span class="line">2052</span><br><span class="line">2053</span><br><span class="line">2054</span><br><span class="line">2055</span><br><span class="line">2056</span><br><span class="line">2057</span><br><span class="line">2058</span><br><span class="line">2059</span><br><span class="line">2060</span><br><span class="line">2061</span><br><span class="line">2062</span><br><span class="line">2063</span><br><span class="line">2064</span><br><span class="line">2065</span><br><span class="line">2066</span><br><span class="line">2067</span><br><span class="line">2068</span><br><span class="line">2069</span><br><span class="line">2070</span><br><span class="line">2071</span><br><span class="line">2072</span><br><span class="line">2073</span><br><span class="line">2074</span><br><span class="line">2075</span><br><span class="line">2076</span><br><span class="line">2077</span><br><span class="line">2078</span><br><span class="line">2079</span><br><span class="line">2080</span><br><span class="line">2081</span><br><span class="line">2082</span><br><span class="line">2083</span><br><span class="line">2084</span><br><span class="line">2085</span><br><span class="line">2086</span><br><span class="line">2087</span><br><span class="line">2088</span><br><span class="line">2089</span><br><span class="line">2090</span><br><span class="line">2091</span><br><span class="line">2092</span><br><span class="line">2093</span><br><span class="line">2094</span><br><span class="line">2095</span><br><span class="line">2096</span><br><span class="line">2097</span><br><span class="line">2098</span><br><span class="line">2099</span><br><span class="line">2100</span><br><span class="line">2101</span><br><span class="line">2102</span><br><span class="line">2103</span><br><span class="line">2104</span><br><span class="line">2105</span><br><span class="line">2106</span><br><span class="line">2107</span><br><span class="line">2108</span><br></pre></td><td class="code"><pre><span class="line">keepalived.conf(<span class="number">5</span>)     Keepalived Configuration's Manual    keepalived.conf(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">       keepalived.conf - configuration <span class="keyword">file</span> <span class="keyword">for</span> Keepalived</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">       keepalived.conf   is   the  configuration  <span class="keyword">file</span>  which</span><br><span class="line">       describes all the Keepalived keywords. Keywords are placed  in  hierar-</span><br><span class="line">       chies  of  blocks  and subblocks, each layer being delimited by '&#123;' and</span><br><span class="line">       '&#125;' pairs.</span><br><span class="line"></span><br><span class="line">       Comments start with '#' or '!' to the end of the  line  and  can  start</span><br><span class="line">       anywhere in a line.</span><br><span class="line"></span><br><span class="line">       The  keyword  'include'  allows  inclusion of other configuration files</span><br><span class="line">       from within the main configuration <span class="keyword">file</span>, or from subsequently  included</span><br><span class="line">       files.</span><br><span class="line"></span><br><span class="line">       The <span class="keyword">format</span> of the include directive is:</span><br><span class="line"></span><br><span class="line">       include FILENAME</span><br><span class="line"></span><br><span class="line">       FILENAME can be a fully qualified or relative pathname, and can include</span><br><span class="line">       wildcards,   including   csh   style   brace   expressions   such    as</span><br><span class="line">       <span class="string">"&#123;foo/&#123;,cat,dog&#125;,bar&#125;"</span> <span class="keyword">if</span> <span class="keyword">glob</span>() supports them.</span><br><span class="line"></span><br><span class="line">       After  opening  an  included  <span class="keyword">file</span>, the current directory is <span class="keyword">set</span> to the</span><br><span class="line">       directory of the <span class="keyword">file</span> itself, so any relative  paths  included  from  a</span><br><span class="line">       <span class="keyword">file</span> are relative to the directory of the including <span class="keyword">file</span> itself.</span><br><span class="line"></span><br><span class="line">       Note:  This  documentation  MUST  be considered as THE</span><br><span class="line">       exhaustive <span class="keyword">source</span> of information in order to configure Keepalived. This</span><br><span class="line">       documenation is supported and maintained by Keepalived Core-Team.</span><br><span class="line"></span><br><span class="line">PARAMETER SYNTAX</span><br><span class="line">       &lt;BOOL&gt; is one of on|off|true|false|yes|no</span><br><span class="line">       &lt;TIMER&gt;  is  a  <span class="keyword">time</span> value in seconds, including</span><br><span class="line">       fractional seconds, e.g. <span class="number">2.71828</span> or <span class="number">3</span>; resolution of  timer  is  micro-</span><br><span class="line">       seconds.</span><br><span class="line"></span><br><span class="line">SCRIPTS</span><br><span class="line">       There are three classes of scripts can be configured to be executed.</span><br><span class="line"></span><br><span class="line">       (a)  Notify  scripts  that  are  run when a vrrp instance or vrrp group</span><br><span class="line">       changes state, or a virtual server quorum changes between up and down.</span><br><span class="line"></span><br><span class="line">       (b) vrrp tracking scripts that will cause vrrp instances to go down  it</span><br><span class="line">       they <span class="keyword">exit</span> a non-zero exist status, or <span class="keyword">if</span> a weight is specified will add</span><br><span class="line">       or subtract the weight to/from the priority of that vrrp instance.</span><br><span class="line"></span><br><span class="line">       (c) LVS checker misc scripts that will cause a real server to  be  con-</span><br><span class="line">       figured down <span class="keyword">if</span> they <span class="keyword">exit</span> with a non-zero status.</span><br><span class="line"></span><br><span class="line">       By  default  the  scripts will be executed by user keepalived_script <span class="keyword">if</span></span><br><span class="line">       that user exists, or <span class="keyword">if</span> not by root, but <span class="keyword">for</span> each script the user/group</span><br><span class="line">       under which it is to be executed can be specified.</span><br><span class="line"></span><br><span class="line">       There  are  significant  security  implications <span class="keyword">if</span> scripts are executed</span><br><span class="line">       with root privileges, especially <span class="keyword">if</span> the scripts themselves are  modifi-</span><br><span class="line">       able  or  replaceable by a non root user. Consequently, security checks</span><br><span class="line">       are made at startup to ensure that <span class="keyword">if</span> a script  is  executed  by  root,</span><br><span class="line">       then it cannot be modified or replaced by a non root user.</span><br><span class="line"></span><br><span class="line">       All scripts should be written so that they will terminate on receipt of</span><br><span class="line">       a SIGTERM signal. Scripts will be sent SIGTERM <span class="keyword">if</span> their  parent  termi-</span><br><span class="line">       nates, or it is a script the keepalived is awaiting its <span class="keyword">exit</span> status and</span><br><span class="line">       it has run <span class="keyword">for</span> too long.</span><br><span class="line"></span><br><span class="line">Quoted strings</span><br><span class="line">       Quoted strings are specified between <span class="string">" characters; more specifically  a</span></span><br><span class="line"><span class="string">       string  will  only  end  after  a  quoted string if there is whitespace</span></span><br><span class="line"><span class="string">       afterwards. For example:</span></span><br><span class="line"><span class="string">              "</span>abcd<span class="string">" efg h jkl "</span>mnop<span class="string">"</span></span><br><span class="line"><span class="string">       will be the single string "</span>abcd efg h jkl mnop<span class="string">", i.e.  the  embedded  "</span></span><br><span class="line">       characters are removed.</span><br><span class="line"></span><br><span class="line">       Quoted  strings  can  also have escaped characters, like the shell. \a,</span><br><span class="line">       \b, \E, \f, \n, \r, \t, \v, \nnn and \xXX (where nnn is up to  <span class="number">3</span>  octal</span><br><span class="line">       digits,  and  XX is any sequence of hex digits) and \cC (which produces</span><br><span class="line">       the control version of character C) are all supported. \C <span class="keyword">for</span> any other</span><br><span class="line">       character C is just treated as an escaped version of character C, so \\</span><br><span class="line">       is a \ character and \<span class="string">" will be a "</span> character, but it  won't  start  or</span><br><span class="line">       terminate a quoted <span class="keyword">string</span>.</span><br><span class="line"></span><br><span class="line">       For  specifying  scripts with parameters, unquoted spaces will separate</span><br><span class="line">       the parameters.  If it is required <span class="keyword">for</span> a parameter to contain a  space,</span><br><span class="line">       it should be enclosed in single quotes (').</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CONFIGURATION PARSER</span><br><span class="line">       Traditionally  the  configuration  <span class="keyword">file</span>  parser has not been one of the</span><br><span class="line">       strengths of keepalived. Lot of efforts have been put to  correct  this</span><br><span class="line">       even <span class="keyword">if</span> this is not the primal goal of the project.</span><br><span class="line"></span><br><span class="line">TOP HIERACHY</span><br><span class="line">       Keepalived configuration <span class="keyword">file</span> is articulated around a <span class="keyword">set</span> of configura-</span><br><span class="line">       tion blocks.  Each block is focusing and targetting a  specific  daemon</span><br><span class="line">       family feature. These features are:</span><br><span class="line"></span><br><span class="line">       GLOBAL CONFIGURATION</span><br><span class="line"></span><br><span class="line">       BFD CONFIGURATION</span><br><span class="line"></span><br><span class="line">       VRRPD CONFIGURATION</span><br><span class="line"></span><br><span class="line">       LVS CONFIGURATION</span><br><span class="line"></span><br><span class="line">GLOBAL CONFIGURATION</span><br><span class="line">       contains  subblocks of Global definitions, Linkbeat interfaces,</span><br><span class="line">       Static track groups,  Static  addresses,  Static  routes,  and</span><br><span class="line">       Static rules</span><br><span class="line"></span><br><span class="line">Global definitions</span><br><span class="line"><span class="comment">       # Following are global daemon facilities for running</span></span><br><span class="line"><span class="comment">       # keepalived in a separate network namespace:</span></span><br><span class="line"><span class="comment">       # --</span></span><br><span class="line"><span class="comment">       # Set the network namespace to run in.</span></span><br><span class="line"><span class="comment">       # The directory /var/run/keepalived will be created as an</span></span><br><span class="line"><span class="comment">       # unshared mount point, for example for pid files.</span></span><br><span class="line"><span class="comment">       # syslog entries will have _NAME appended to the ident.</span></span><br><span class="line"><span class="comment">       # Note: the namespace cannot be changed on a configuration reload.</span></span><br><span class="line">       net_namespace NAME</span><br><span class="line"></span><br><span class="line"><span class="comment">       # ipsets wasn't network namespace aware until Linux 3.13, and so</span></span><br><span class="line"><span class="comment">       # if running with # an earlier version of the kernel, by default</span></span><br><span class="line"><span class="comment">       # use of ipsets is disabled if using a namespace and vrrp_ipsets</span></span><br><span class="line"><span class="comment">       # has not been specified. This options overrides the default and</span></span><br><span class="line"><span class="comment">       # allows ipsets to be used with a namespace on kernels prior to 3.13.</span></span><br><span class="line">       namespace_with_ipsets</span><br><span class="line"></span><br><span class="line"><span class="comment">       # If multiple instances of keepalived are run in the same namespace,</span></span><br><span class="line"><span class="comment">       # this will create pid files with NAME as part of the file names,</span></span><br><span class="line"><span class="comment">       # in /var/run/keepalived.</span></span><br><span class="line"><span class="comment">       # Note: the instance name cannot be changed on a configuration reload</span></span><br><span class="line">       instance NAME</span><br><span class="line"></span><br><span class="line"><span class="comment">       # Create pid files in /var/run/keepalived</span></span><br><span class="line">       use_pid_dir</span><br><span class="line"></span><br><span class="line"><span class="comment">       # Poll to detect media link failure using ETHTOOL, MII or ioctl interface</span></span><br><span class="line"><span class="comment">       # otherwise uses netlink interface.</span></span><br><span class="line">       linkbeat_use_polling</span><br><span class="line"></span><br><span class="line"><span class="comment">       # Time for main process to allow for child processes to exit on termination</span></span><br><span class="line"><span class="comment">       # in seconds. This can be needed for very large configurations.</span></span><br><span class="line"><span class="comment">       # (default: 5)</span></span><br><span class="line">       child_wait_time SECS</span><br><span class="line"></span><br><span class="line"><span class="comment">       # Global definitions configuration block</span></span><br><span class="line">       global_defs &#123;</span><br><span class="line"><span class="comment">           # Set the process names of the keepalived processes to the default values:</span></span><br><span class="line"><span class="comment">           #   keepalived, keepalived_vrrp, keepalived_ipvs, keepalived_bfd</span></span><br><span class="line">           process_names</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Specify the individual process names</span></span><br><span class="line">	   process_name NAME</span><br><span class="line">	   vrrp_process_name NAME</span><br><span class="line">	   ipvs_process_name NAME</span><br><span class="line">	   bfd_process_name NAME</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set of email To: notify</span></span><br><span class="line">           notification_email &#123;</span><br><span class="line">               admin@example1.com</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # email from address that will be in the header</span></span><br><span class="line"><span class="comment">           # (default: keepalived@&lt;local host name&gt;)</span></span><br><span class="line">           notification_email_from admin@example.com</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Remote SMTP server used to send notification email.</span></span><br><span class="line"><span class="comment">           # IP address or domain name with optional port number.</span></span><br><span class="line"><span class="comment">           # (default port number: 25)</span></span><br><span class="line">           smtp_server <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> [&lt;PORT&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Name to use in HELO messages.</span></span><br><span class="line"><span class="comment">           # (default: local host name)</span></span><br><span class="line">           smtp_helo_name &lt;STRING&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # SMTP server connection timeout in seconds.</span></span><br><span class="line">           smtp_connect_timeout <span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # Sets default state for all smtp_alerts</span></span><br><span class="line">           smtp_alert &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Sets default state for vrrp smtp_alerts</span></span><br><span class="line">           smtp_alert_vrrp &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Sets default state for checker smtp_alerts</span></span><br><span class="line">           smtp_alert_checker &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Sets logging all checker failes while checker up</span></span><br><span class="line">           checker_log_all_failures &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">	   # If set, keepalived only removes virtual servers at shutdown</span></span><br><span class="line"><span class="comment">	   #  (the kernel will remove the real servers). This is faster</span></span><br><span class="line"><span class="comment">	   #  for large configurations.</span></span><br><span class="line">	   checker_shutdown_vs_only</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Don't send smtp alerts for fault conditions</span></span><br><span class="line">           no_email_faults</span><br><span class="line"></span><br><span class="line"><span class="comment">           # String identifying the machine (doesn't have to be hostname).</span></span><br><span class="line"><span class="comment">           # (default: local host name)</span></span><br><span class="line">           router_id &lt;STRING&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Multicast Group to use for IPv4 VRRP adverts</span></span><br><span class="line"><span class="comment">           # (default: 224.0.0.18)</span></span><br><span class="line">           vrrp_mcast_group4 <span class="number">224.0</span><span class="number">.0</span><span class="number">.18</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # Multicast Group to use for IPv6 VRRP adverts</span></span><br><span class="line"><span class="comment">           # (default: ff02::12)</span></span><br><span class="line">           vrrp_mcast_group6 ff02::<span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # sets the default interface for static addresses.</span></span><br><span class="line"><span class="comment">           # (default: eth0)</span></span><br><span class="line">           default_interface p33p1<span class="number">.3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # Sync daemon as provided by IPVS kernel code only support</span></span><br><span class="line"><span class="comment">           # a single daemon instance at a time to synchronize connection table.</span></span><br><span class="line"><span class="comment">           # Binding interface, vrrp instance and optional</span></span><br><span class="line"><span class="comment">           #  syncid for lvs syncd</span></span><br><span class="line"><span class="comment">           #  syncid (0 to 255) for lvs syncd</span></span><br><span class="line"><span class="comment">           #  maxlen (1..65507) maximum packet length</span></span><br><span class="line"><span class="comment">           #  port (1..65535) UDP port number to use</span></span><br><span class="line"><span class="comment">           #  ttl (1..255)</span></span><br><span class="line"><span class="comment">           #  group - multicast group address (IPv4 or IPv6)</span></span><br><span class="line"><span class="comment">           # <span class="doctag">NOTE:</span> maxlen, port, ttl and group are only available on Linux 4.3 or later.</span></span><br><span class="line">           lvs_sync_daemon &lt;INTERFACE&gt; &lt;VRRP_INSTANCE&gt; [id &lt;SYNC_ID&gt;] [maxlen &lt;LEN&gt;] \</span><br><span class="line">                           [port &lt;PORT&gt;] [ttl &lt;TTL&gt;] [group &lt;IP ADDR&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # flush any existing LVS configuration at startup</span></span><br><span class="line">           lvs_flush</span><br><span class="line"></span><br><span class="line"><span class="comment">           # flush remaining LVS configuration at shutdown</span></span><br><span class="line">	   lvs_flush_onstop</span><br><span class="line"></span><br><span class="line"><span class="comment">           # delay for second set of gratuitous ARPs after transition to MASTER.</span></span><br><span class="line"><span class="comment">           # in seconds, 0 for no second set.</span></span><br><span class="line"><span class="comment">           # (default: 5)</span></span><br><span class="line">           vrrp_garp_master_delay <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # number of gratuitous ARP messages to send at a time after</span></span><br><span class="line"><span class="comment">           # transition to MASTER.</span></span><br><span class="line"><span class="comment">           # (default: 5)</span></span><br><span class="line">           vrrp_garp_master_repeat <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # delay for second set of gratuitous ARPs after lower priority</span></span><br><span class="line"><span class="comment">           # advert received when MASTER.</span></span><br><span class="line">           vrrp_garp_lower_prio_delay <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # number of gratuitous ARP messages to send at a time after</span></span><br><span class="line"><span class="comment">           # lower priority advert received when MASTER.</span></span><br><span class="line">           vrrp_garp_lower_prio_repeat <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # minimum time interval for refreshing gratuitous ARPs while MASTER.</span></span><br><span class="line"><span class="comment">           # in seconds.</span></span><br><span class="line"><span class="comment">           # (default: 0 (no refreshing))</span></span><br><span class="line">           vrrp_garp_master_refresh <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # number of gratuitous ARP messages to send at a time while MASTER</span></span><br><span class="line"><span class="comment">           # (default: 1)</span></span><br><span class="line">           vrrp_garp_master_refresh_repeat <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # Delay in ms between gratuitous ARP messages sent on an interface</span></span><br><span class="line"><span class="comment">           # decimal, seconds (resolution usecs).</span></span><br><span class="line"><span class="comment">           # (default: 0)</span></span><br><span class="line">           vrrp_garp_interval <span class="number">0.001</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # Delay in ms between unsolicited NA messages sent on an interface</span></span><br><span class="line"><span class="comment">           # decimal, seconds (resolution usecs).</span></span><br><span class="line"><span class="comment">           # (default: 0)</span></span><br><span class="line">           vrrp_gna_interval <span class="number">0.000001</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # By default keepalived sends 5 gratuitions ARP/NA messages at a</span></span><br><span class="line"><span class="comment">           # time, and after transitioning to MASTER sends a second block of</span></span><br><span class="line"><span class="comment">           # 5 messages 5 seconds later.</span></span><br><span class="line"><span class="comment">           # With modern switches this is unnecessary, so setting vrrp_min_garp</span></span><br><span class="line"><span class="comment">           # causes only one ARP/NA message to be sent, with no repeat 5 seconds</span></span><br><span class="line"><span class="comment">           # later.</span></span><br><span class="line">           vrrp_min_garp [&lt;BOOL&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # If a lower priority advert is received, don't send another advert.</span></span><br><span class="line"><span class="comment">           # This causes adherence to the RFCs. Defaults to false, unless</span></span><br><span class="line"><span class="comment">           # strict_mode is set.</span></span><br><span class="line">           vrrp_lower_prio_no_advert [&lt;BOOL&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # If we are master and receive a higher priority advert, send an advert</span></span><br><span class="line"><span class="comment">           # (which will be lower priority than the other master), before we</span></span><br><span class="line"><span class="comment">           # transition to backup. This means that if the other master has</span></span><br><span class="line"><span class="comment">           # garp_lower_priority_repeat set, it will resend garp messages.</span></span><br><span class="line"><span class="comment">           # This is to get around the problem of their having been two simultaneous</span></span><br><span class="line"><span class="comment">           # masters, and the last GARP messages seen were from us.</span></span><br><span class="line">           vrrp_higher_prio_send_advert [&lt;BOOL&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the default VRRP version to use</span></span><br><span class="line"><span class="comment">           # (default: 2 , but IPv6 instances will use version 3)</span></span><br><span class="line">           vrrp_version &lt;<span class="number">2</span> or <span class="number">3</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Specify the iptables chain for ensuring a version 3 instance</span></span><br><span class="line"><span class="comment">           # doesn't respond on addresses that it doesn't own.</span></span><br><span class="line"><span class="comment">           # Note: it is necessary for the specified chain to exist in</span></span><br><span class="line"><span class="comment">           # the iptables and/or ip6tables configuration, and for the chain</span></span><br><span class="line"><span class="comment">           # to be called from an appropriate point in the iptables configuration.</span></span><br><span class="line"><span class="comment">           # It will probably be necessary to have this filtering after accepting</span></span><br><span class="line"><span class="comment">           # any ESTABLISHED,RELATED packets, because IPv4 might select the VIP as</span></span><br><span class="line"><span class="comment">           # the source address for outgoing connections.</span></span><br><span class="line"><span class="comment">           # (default: INPUT)</span></span><br><span class="line">           vrrp_iptables keepalived</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Use nftables to implement no_accept mode.</span></span><br><span class="line"><span class="comment">           #   TABLENAME must not exist, and must be different for each</span></span><br><span class="line"><span class="comment">           #   instance of keepalived running in the same network namespace.</span></span><br><span class="line"><span class="comment">           #   Default tablename is keepalived, and priority is -1.</span></span><br><span class="line"><span class="comment">           #   keepalived will create base chains in the table.</span></span><br><span class="line"><span class="comment">           #   counters means counters are added to the rules (primarily for</span></span><br><span class="line"><span class="comment">           #   debugging purposes).</span></span><br><span class="line"><span class="comment">           #   ifindex means create IPv6 link local sets using ifindex rather</span></span><br><span class="line"><span class="comment">           #   than ifnames. This is the default unless the vrrp_instance has</span></span><br><span class="line"><span class="comment">           #   set dont_track_primary. The alternative is to use interface names</span></span><br><span class="line"><span class="comment">           #   as part of the set key, but nftables prior to v0.8.3 will then no</span></span><br><span class="line"><span class="comment">           #   longer work.</span></span><br><span class="line">           nftables [TABLENAME]</span><br><span class="line">           nftables_priority PRIORITY</span><br><span class="line">           nftables_counters</span><br><span class="line">           nftables_ifindex</span><br><span class="line"></span><br><span class="line"><span class="comment">           # or for outbound filtering as well</span></span><br><span class="line"><span class="comment">           # Note, outbound filtering won't work with IPv4, since the VIP can be</span></span><br><span class="line"><span class="comment">           # selected as the source address for an outgoing connection. With IPv6</span></span><br><span class="line"><span class="comment">           # this is unlikely since the addresses are deprecated.</span></span><br><span class="line">           vrrp_iptables keepalived_in keepalived_out</span><br><span class="line"></span><br><span class="line"><span class="comment">           # or to not add any iptables rules:</span></span><br><span class="line">           vrrp_iptables</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Keepalived may have the option to use ipsets in conjunction with</span></span><br><span class="line"><span class="comment">           # iptables. If so, then the ipset names can be specified, defaults</span></span><br><span class="line"><span class="comment">           # as below. If no names are specified, ipsets will not be used,</span></span><br><span class="line"><span class="comment">           # otherwise any omitted names will be constructed by adding "_if"</span></span><br><span class="line"><span class="comment">           # and/or "6" to previously specified names.</span></span><br><span class="line">           vrrp_ipsets [keepalived [keepalived6 [keepalived_if6]]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The following enables checking that when in unicast mode, the</span></span><br><span class="line"><span class="comment">           # source address of a VRRP packet is one of our unicast peers.</span></span><br><span class="line">           vrrp_check_unicast_src</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Checking all the addresses in a received VRRP advert can be time</span></span><br><span class="line"><span class="comment">           # consuming. Setting this flag means the check won't be carried out</span></span><br><span class="line"><span class="comment">           # if the advert is from the same master router as the previous advert</span></span><br><span class="line"><span class="comment">           # received.</span></span><br><span class="line"><span class="comment">           # (default: don't skip)</span></span><br><span class="line">           vrrp_skip_check_adv_addr</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Enforce strict VRRP protocol compliance. This will prohibit:</span></span><br><span class="line"><span class="comment">           #   0 VIPs</span></span><br><span class="line"><span class="comment">           #   unicast peers</span></span><br><span class="line"><span class="comment">           #   IPv6 addresses in VRRP version 2</span></span><br><span class="line">           vrrp_strict</span><br><span class="line"></span><br><span class="line"><span class="comment">	   # Send vrrp instance priority notifications on notify FIFOs.</span></span><br><span class="line">	   vrrp_notify_priority_changes &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The following options can be used if vrrp or checker processes</span></span><br><span class="line"><span class="comment">           # are timing out. This can be seen by a backup vrrp instance becoming</span></span><br><span class="line"><span class="comment">           # master even when the master is still running because the master or</span></span><br><span class="line"><span class="comment">           # backup system is too busy to process vrrp packets.</span></span><br><span class="line"><span class="comment">           # --</span></span><br><span class="line"><span class="comment">           # Set the vrrp child process priority (Negative values increase priority)</span></span><br><span class="line">           vrrp_priority &lt;<span class="number">-20</span> to <span class="number">19</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the checker child process priority</span></span><br><span class="line">           checker_priority &lt;<span class="number">-20</span> to <span class="number">19</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the BFD child process priority</span></span><br><span class="line">           bfd_priority &lt;<span class="number">-20</span> to <span class="number">19</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the vrrp child process non swappable</span></span><br><span class="line">           vrrp_no_swap</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the checker child process non swappable</span></span><br><span class="line">           checker_no_swap</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the BFD child process non swappable</span></span><br><span class="line">           bfd_no_swap</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the vrrp child process to use real-time scheduling</span></span><br><span class="line"><span class="comment">           # at the specified priority</span></span><br><span class="line">           vrrp_rt_priority &lt;<span class="number">1.</span><span class="number">.99</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the checker child process to use real-time scheduling</span></span><br><span class="line"><span class="comment">           # at the specified priority</span></span><br><span class="line">           checker_rt_priority &lt;<span class="number">1.</span><span class="number">.99</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the BFD child process to use real-time scheduling</span></span><br><span class="line"><span class="comment">           # at the specified  priority</span></span><br><span class="line">           bfd_rt_priority &lt;<span class="number">1.</span><span class="number">.99</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the limit on CPU time between blocking system calls,</span></span><br><span class="line"><span class="comment">           # in microseconds</span></span><br><span class="line"><span class="comment">           # (default: 1000)</span></span><br><span class="line">           vrrp_rlimit_rtime &gt;=<span class="number">1</span></span><br><span class="line">           checker_rlimit_rtime &gt;=<span class="number">1</span></span><br><span class="line">           bfd_rlimit_rtime &gt;=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # If Keepalived has been build with SNMP support, the following</span></span><br><span class="line"><span class="comment">           # keywords are available.</span></span><br><span class="line"><span class="comment">           # Note: Keepalived, checker and RFC support can be individually</span></span><br><span class="line"><span class="comment">           # enabled/disabled</span></span><br><span class="line"><span class="comment">           # --</span></span><br><span class="line"><span class="comment">           # Specify socket to use for connecting to SNMP master agent</span></span><br><span class="line"><span class="comment">           # (see source module keepalived/vrrp/vrrp_snmp.c for more details)</span></span><br><span class="line"><span class="comment">           # (default: unix:/var/agentx/master)</span></span><br><span class="line">           snmp_socket udp:<span class="number">1.2</span><span class="number">.3</span><span class="number">.4</span>:<span class="number">705</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # enable SNMP handling of vrrp element of KEEPALIVED MIB</span></span><br><span class="line">           enable_snmp_vrrp</span><br><span class="line"></span><br><span class="line"><span class="comment">           # enable SNMP handling of checker element of KEEPALIVED MIB</span></span><br><span class="line">           enable_snmp_checker</span><br><span class="line"></span><br><span class="line"><span class="comment">           # enable SNMP handling of RFC2787 and RFC6527 VRRP MIBs</span></span><br><span class="line">           enable_snmp_rfc</span><br><span class="line"></span><br><span class="line"><span class="comment">           # enable SNMP handling of RFC2787 VRRP MIB</span></span><br><span class="line">           enable_snmp_rfcv2</span><br><span class="line"></span><br><span class="line"><span class="comment">           # enable SNMP handling of RFC6527 VRRP MIB</span></span><br><span class="line">           enable_snmp_rfcv3</span><br><span class="line"></span><br><span class="line"><span class="comment">           # enable SNMP traps</span></span><br><span class="line">           enable_traps</span><br><span class="line"></span><br><span class="line"><span class="comment">           # If Keepalived has been build with DBus support, the following</span></span><br><span class="line"><span class="comment">           # keywords are available.</span></span><br><span class="line"><span class="comment">           # --</span></span><br><span class="line"><span class="comment">           # Enable the DBus interface</span></span><br><span class="line">           enable_dbus</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Name of DBus service</span></span><br><span class="line"><span class="comment">           # Useful if you want to run multiple keepalived processes with DBus enabled</span></span><br><span class="line"><span class="comment">           # (default: org.keepalived.Vrrp1)</span></span><br><span class="line">           dbus_service_name SERVICE_NAME</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Specify the default username/groupname to run scripts under.</span></span><br><span class="line"><span class="comment">           # If this option is not specified, the user defaults to keepalived_script</span></span><br><span class="line"><span class="comment">           # if that user exists, otherwise root.</span></span><br><span class="line"><span class="comment">           # If groupname is not specified, it defaults to the user's group.</span></span><br><span class="line">           script_user username [groupname]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Don't run scripts configured to be run as root if any part of the path</span></span><br><span class="line"><span class="comment">           # is writable by a non-root user.</span></span><br><span class="line">           enable_script_security</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Rather than using notify scripts, specifying a fifo allows more</span></span><br><span class="line"><span class="comment">           # efficient processing of notify events, and guarantees that they</span></span><br><span class="line"><span class="comment">           # will be delivered in the correct sequence.</span></span><br><span class="line"><span class="comment">           # <span class="doctag">NOTE:</span> the FIFO names must all be different</span></span><br><span class="line"><span class="comment">           # --</span></span><br><span class="line"><span class="comment">           # FIFO to write notify events to</span></span><br><span class="line"><span class="comment">           # See vrrp_notify_fifo and lvs_notify_fifo for format of output</span></span><br><span class="line"><span class="comment">	   # For further details, see the description under vrrp_sync_group.</span></span><br><span class="line"><span class="comment">	   # see doc/samples/sample_notify_fifo.sh for sample usage.</span></span><br><span class="line">           notify_fifo FIFO_NAME [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # script to be run by keepalived to process notify events</span></span><br><span class="line"><span class="comment">           # The FIFO name will be passed to the script as the last parameter</span></span><br><span class="line">           notify_fifo_script STRING|QUOTED_STRING [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # FIFO to write vrrp notify events to.</span></span><br><span class="line"><span class="comment">           # The string written will be a line of the form: INSTANCE "VI_1" MASTER 100</span></span><br><span class="line"><span class="comment">           # and will be terminated with a new line character.</span></span><br><span class="line"><span class="comment">           # For further details of the output, see the description under vrrp_sync_group</span></span><br><span class="line"><span class="comment">           # and doc/samples/sample_notify_fifo.sh for sample usage.</span></span><br><span class="line">           vrrp_notify_fifo FIFO_NAME [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # script to be run by keepalived to process vrrp notify events</span></span><br><span class="line"><span class="comment">           # The FIFO name will be passed to the script as the last parameter</span></span><br><span class="line">           vrrp_notify_fifo_script STRING|QUOTED_STRING [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # FIFO to write notify healthchecker events to</span></span><br><span class="line"><span class="comment">           # The string written will be a line of the form:</span></span><br><span class="line"><span class="comment">           # VS [192.168.201.15]:tcp:80 &#123;UP|DOWN&#125;</span></span><br><span class="line"><span class="comment">           # RS [1.2.3.4]:tcp:80 [192.168.201.15]:tcp:80 &#123;UP|DOWN&#125;</span></span><br><span class="line"><span class="comment">           # and will be terminated with a new line character.</span></span><br><span class="line">           lvs_notify_fifo FIFO_NAME [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # script to be run by keepalived to process healthchecher notify events</span></span><br><span class="line"><span class="comment">           # The FIFO name will be passed to the script as the last parameter</span></span><br><span class="line">           lvs_notify_fifo_script STRING|QUOTED_STRING [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Allow configuration to include interfaces that don't exist at startup.</span></span><br><span class="line"><span class="comment">           # This allows keepalived to work with interfaces that may be deleted and restored</span></span><br><span class="line"><span class="comment">           #   and also allows virtual and static routes and rules on VMAC interfaces.</span></span><br><span class="line"><span class="comment">           #   allow_if_changes allows an interface to be deleted and recreated with a</span></span><br><span class="line"><span class="comment">           #   different type or underlying interface, eg changing from vlan to macvlan</span></span><br><span class="line"><span class="comment">           #   or changing a macvlan from eth1 to eth2. This is predominantly used for</span></span><br><span class="line"><span class="comment">           #   reporting duplicate VRID errors at startup if allow_if_changes is not set.</span></span><br><span class="line">           dynamic_interfaces [allow_if_changes]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The following options are only needed for large configurations, where either</span></span><br><span class="line"><span class="comment">           # keepalived creates a large number of interface, or the system has a large</span></span><br><span class="line"><span class="comment">           # number of interface. These options only need using if</span></span><br><span class="line"><span class="comment">           # "Netlink: Receive buffer overrun" messages are seen in the system logs.</span></span><br><span class="line"><span class="comment">           # If the buffer size needed exceeds the value in /proc/sys/net/core/rmem_max</span></span><br><span class="line"><span class="comment">           #  the corresponding force option will need to be set.</span></span><br><span class="line"><span class="comment">           # --</span></span><br><span class="line"><span class="comment">           # Set netlink receive buffer size. This is useful for</span></span><br><span class="line"><span class="comment">           # very large configurations where a large number of interfaces exist, and</span></span><br><span class="line"><span class="comment">           # the initial read of the interfaces on the system causes a netlink buffer</span></span><br><span class="line"><span class="comment">           # overrun.</span></span><br><span class="line">           vrrp_netlink_cmd_rcv_bufs BYTES</span><br><span class="line">           vrrp_netlink_cmd_rcv_bufs_force &lt;BOOL&gt;</span><br><span class="line">           vrrp_netlink_monitor_rcv_bufs BYTES</span><br><span class="line">           vrrp_netlink_monitor_rcv_bufs_force &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The vrrp netlink command and monitor socket the checker command and</span></span><br><span class="line"><span class="comment">           # and monitor socket and process monitor buffer sizes can be independently set.</span></span><br><span class="line"><span class="comment">           # The force flag means to use SO_RCVBUFFORCE, so that the buffer size</span></span><br><span class="line"><span class="comment">           # can exceed /proc/sys/net/core/rmem_max.</span></span><br><span class="line">           lvs_netlink_cmd_rcv_bufs BYTES</span><br><span class="line">           lvs_netlink_cmd_rcv_bufs_force &lt;BOOL&gt;</span><br><span class="line">           lvs_netlink_monitor_rcv_bufs BYTES</span><br><span class="line">           lvs_netlink_monitor_rcv_bufs_force &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # As a guide for process_monitor_rcv_bufs for 1400 processes terminating</span></span><br><span class="line"><span class="comment">           # simultaneously, 212992 (the default on some systems) is insufficient, whereas</span></span><br><span class="line"><span class="comment">           # 500000 is sufficient.</span></span><br><span class="line">           process_monitor_rcv_bufs BYTES</span><br><span class="line">           process_monitor_rcv_bufs_force &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # When a socket is opened, the kernel configures the max rx buffer size for</span></span><br><span class="line"><span class="comment">           # the socket to /proc/sys/net/core/rmem_default. On some systems this can be</span></span><br><span class="line"><span class="comment">           # very large, and even generally this can be much larger than necessary.</span></span><br><span class="line"><span class="comment">           # This isn't a problem so long as keepalived is reading all queued data from</span></span><br><span class="line"><span class="comment">           # it's sockets, but if rmem_default was set sufficiently large, and if for</span></span><br><span class="line"><span class="comment">           # some reason keepalived stopped reading, it could consume all system memory.</span></span><br><span class="line"><span class="comment">           # The vrrp_rx_bufs_policy allows configuring of the rx bufs size when the</span></span><br><span class="line"><span class="comment">           # sockets are opened. If the policy is MTU, the rx buf size is configured</span></span><br><span class="line"><span class="comment">           # to the total of interface's MTU * vrrp_rx_bufs_multiplier for each vrrp</span></span><br><span class="line"><span class="comment">           # instance using the socket. Likewise, if the policy is ADVERT, then it is</span></span><br><span class="line"><span class="comment">           # the total of each vrrp instances advert packet size * multiplier.</span></span><br><span class="line"><span class="comment">           # (default: use system default)</span></span><br><span class="line">           vrrp_rx_bufs_policy [MTU|ADVERT|NUMBER]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # (default: 3)</span></span><br><span class="line">           vrrp_rx_bufs_multiplier NUMBER</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Send notifies at startup for real servers that are starting up</span></span><br><span class="line">           rs_init_notifies</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Don't send an email every time a real server checker changes state;</span></span><br><span class="line"><span class="comment">           # only send email when a real server is added or removed</span></span><br><span class="line">           no_checker_emails</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The umask to use for creating files. The number can be specified in hex,</span></span><br><span class="line"><span class="comment">           #   octal or decimal. BITS are I&#123;R|W|X&#125;&#123;USR|GRP|OTH&#125;, e.g. IRGRP, separated</span></span><br><span class="line"><span class="comment">           #   by '|'s. The default umask is IWGRP | IWOTH. This option cannot override</span></span><br><span class="line"><span class="comment">           #   the command-line option.</span></span><br><span class="line">           umask [NUMBER|BITS] </span><br><span class="line"></span><br><span class="line"><span class="comment">           # On some systems when bond interfaces are created, they can start</span></span><br><span class="line"><span class="comment">	   # passing traffic and then have a several second gap when they stop</span></span><br><span class="line"><span class="comment">	   # passing traffic inbound. This can mean that if keepalived is started</span></span><br><span class="line"><span class="comment">	   # at boot time, i.e. at the same time as bond interfaces are being</span></span><br><span class="line"><span class="comment">	   # created, keepalived doesn't receive adverts and hence can become master</span></span><br><span class="line"><span class="comment">	   # despite an instance with higher priority sending adverts. This option</span></span><br><span class="line"><span class="comment">	   # specifies a delay in seconds before vrrp instances start up after</span></span><br><span class="line"><span class="comment">           # keepalived starts,</span></span><br><span class="line">           vrrp_startup_delay <span class="number">5.5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">	   # Specify random seed for $&#123;_RANDOM&#125;, to make configurations repeatable</span></span><br><span class="line"><span class="comment">	   # (default is to use a seed based on the time, so that each time a</span></span><br><span class="line"><span class="comment">	   # different configuration will be generated).</span></span><br><span class="line">	   random_seed  UNSIGNED_INT</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">Linkbeat interfaces</span><br><span class="line">       The linkbeat_interfaces block allows specifying which interfaces should</span><br><span class="line">       use polling via MII, Ethtool  or  ioctl  status  rather  than  rely  on</span><br><span class="line">       netlink  status  updates.  This  allows more granular control of <span class="keyword">global</span></span><br><span class="line">       definition linkbeat_use_polling.</span><br><span class="line"></span><br><span class="line">       This   option   is   preferred   over    the    deprecated    use    of</span><br><span class="line">       linkbeat_use_polling  in  a vrrp_instance block, since</span><br><span class="line">       the  latter  only  allows  using  linkbeat  on  the  interface  of  the</span><br><span class="line">       vrrp_instance  itself,  whereas  track_interface  and</span><br><span class="line">       virtual_ipaddresses and virtual_iproutes may require  monitoring  other</span><br><span class="line">       interfaces, which may need to use linkbeat polling.</span><br><span class="line"></span><br><span class="line">       The  default polling type to use is MII, unless that isn't supported in</span><br><span class="line">       which case ETHTOOL is used, and <span class="keyword">if</span>  that  isn't  supported  then  ioctl</span><br><span class="line">       polling. The preferred type of polling to use can be specified with MII</span><br><span class="line">       or ETHTOOL or IOCTL <span class="keyword">after</span> the interface name, but <span class="keyword">if</span>  that  type  isn't</span><br><span class="line">       supported, a supported type will be used.</span><br><span class="line"></span><br><span class="line">       The synfax <span class="keyword">for</span> linkbeat_interfaces is:</span><br><span class="line">           linkbeat_interfaces &#123;</span><br><span class="line">               eth2</span><br><span class="line">               enp2s0 ETHTOOL</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">Static track groups</span><br><span class="line">       Static  track  groups  are used to allow vrrp instances to track static</span><br><span class="line">       addresses, routes and rules. If a static address/route/rule specifies a</span><br><span class="line">       track  group,  then  <span class="keyword">if</span> the address/route/rule is deleted and cannot be</span><br><span class="line">       restored, the vrrp instance will transition to fault state.</span><br><span class="line"></span><br><span class="line">       The syntax <span class="keyword">for</span> a track group is:</span><br><span class="line">           track_group GROUP1 &#123;</span><br><span class="line">               group &#123;</span><br><span class="line">                   VI_1</span><br><span class="line">                   VI_2</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">Static routes/addresses/rules</span><br><span class="line">       Keepalived can configure static addresses,  routes,  and  rules.  These</span><br><span class="line">       addresses  are  NOT  moved  by vrrpd, they stay on the</span><br><span class="line">       machine.  If you already have IPs and routes on your machines and  your</span><br><span class="line">       machines  can ping each other, you don't need this section.  The syntax</span><br><span class="line">       <span class="keyword">for</span> rules and routes is that same as  <span class="keyword">for</span>  ip  rule  add/ip  route  add</span><br><span class="line">       (except shorted option names aren't supported due to ambiguities).  The</span><br><span class="line">       track_group specification refers to a named track_group which lists the</span><br><span class="line">       vrrp  instances  which  will  track the address, i.e. <span class="keyword">if</span> the address is</span><br><span class="line">       deleted the vrrp instances will transition to backup.</span><br><span class="line"></span><br><span class="line">       NOTE: since rules without preferences can be added in different  orders</span><br><span class="line">       due  to  vrrp  instances transitioning from master to backup etc, rules</span><br><span class="line">       need to have a preference. If a preference is not specified, keepalived</span><br><span class="line">       will assign one, but it will probably not be what you want.</span><br><span class="line"></span><br><span class="line">       The  syntax is the same <span class="keyword">for</span> virtual addresses and virtual routes. If no</span><br><span class="line">       dev element is specified, it  defaults  to  default_interface  (default</span><br><span class="line">       eth0).   Note:  the broadcast address may be specified as '-' or '+' to</span><br><span class="line">       clear or <span class="keyword">set</span> the host bits of the address.</span><br><span class="line"></span><br><span class="line">       If a route or rule could <span class="keyword">apply</span> to  either IPv4 or IPv6  it will default</span><br><span class="line">       to IPv4. To force a route/rule to be IPv6, add the keyword <span class="string">"inet6"</span>.</span><br><span class="line"></span><br><span class="line">           static_ipaddress &#123;</span><br><span class="line">               &lt;IPADDR&gt;[/&lt;MASK&gt;] [brd &lt;IPADDR&gt;] [dev &lt;STRING&gt;] [scope &lt;SCOPE&gt;]</span><br><span class="line">                                 [label &lt;LABEL&gt;] [peer &lt;IPADDR&gt;] [home]</span><br><span class="line">                                 [-nodad] [mngtmpaddr] [noprefixroute]</span><br><span class="line">                                 [autojoin] [track_group GROUP]</span><br><span class="line">               <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span>/<span class="number">24</span> dev eth0 scope <span class="keyword">global</span></span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           static_routes &#123;</span><br><span class="line">               <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span>/<span class="number">24</span> via <span class="number">192.168</span><span class="number">.1</span><span class="number">.100</span> dev eth0 track_group GROUP1</span><br><span class="line"></span><br><span class="line">               <span class="number">192.168</span><span class="number">.100</span><span class="number">.0</span>/<span class="number">24</span> table <span class="number">6909</span> nexthop via <span class="number">192.168</span><span class="number">.101</span><span class="number">.1</span> dev wlan0</span><br><span class="line">                                onlink weight <span class="number">1</span> nexthop via <span class="number">192.168</span><span class="number">.101</span><span class="number">.2</span></span><br><span class="line">                                dev wlan0 onlink weight <span class="number">2</span></span><br><span class="line"></span><br><span class="line">               <span class="number">192.168</span><span class="number">.200</span><span class="number">.0</span>/<span class="number">24</span> dev p33p1<span class="number">.2</span> table <span class="number">6909</span> tos <span class="number">0x04</span> protocol bird</span><br><span class="line">                                scope link priority <span class="number">12</span> mtu <span class="number">1000</span> hoplimit <span class="number">100</span></span><br><span class="line">                                advmss <span class="number">101</span> rtt <span class="number">102</span> rttvar <span class="number">103</span> reordering <span class="number">104</span></span><br><span class="line">                                window <span class="number">105</span> cwnd <span class="number">106</span> ssthresh lock <span class="number">107</span> realms</span><br><span class="line">                                PQA/<span class="number">0x14</span> rto_min <span class="number">108</span> initcwnd <span class="number">109</span> initrwnd <span class="number">110</span></span><br><span class="line">                                features ecn</span><br><span class="line"></span><br><span class="line">               <span class="number">2001</span>:<span class="number">470</span>:<span class="number">69e9</span>:<span class="number">1</span>:<span class="number">2</span>::<span class="number">4</span> dev p33p1<span class="number">.2</span> table <span class="number">6909</span> tos <span class="number">0x04</span> protocol</span><br><span class="line">                                    bird scope link priority <span class="number">12</span> mtu <span class="number">1000</span></span><br><span class="line">                                    hoplimit <span class="number">100</span> advmss <span class="number">101</span> rtt <span class="number">102</span> rttvar <span class="number">103</span></span><br><span class="line">                                    reordering <span class="number">104</span> window <span class="number">105</span> cwnd <span class="number">106</span> ssthresh</span><br><span class="line">                                    lock <span class="number">107</span> rto_min <span class="number">108</span> initcwnd <span class="number">109</span></span><br><span class="line">                                    initrwnd <span class="number">110</span> features ecn fastopen_no_cookie <span class="number">1</span></span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           static_rules &#123;</span><br><span class="line">               from <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span>/<span class="number">24</span> table <span class="number">1</span> track_group GROUP1</span><br><span class="line"></span><br><span class="line">               to <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span>/<span class="number">24</span> table <span class="number">1</span></span><br><span class="line"></span><br><span class="line">               from <span class="number">192.168</span><span class="number">.28</span><span class="number">.0</span>/<span class="number">24</span> to <span class="number">192.168</span><span class="number">.29</span><span class="number">.0</span>/<span class="number">26</span> table small iif p33p1</span><br><span class="line">                                    oif wlan0 tos <span class="number">22</span> fwmark <span class="number">24</span>/<span class="number">12</span></span><br><span class="line">                                    preference <span class="number">39</span> realms <span class="number">30</span>/<span class="number">20</span> goto <span class="number">40</span></span><br><span class="line"></span><br><span class="line">               to <span class="number">1</span>:<span class="number">2</span>:<span class="number">3</span>:<span class="number">4</span>:<span class="number">5</span>:<span class="number">6</span>:<span class="number">7</span>:<span class="number">0</span>/<span class="number">112</span> from <span class="number">7</span>:<span class="number">6</span>:<span class="number">5</span>:<span class="number">4</span>:<span class="number">3</span>:<span class="number">2</span>::/<span class="number">96</span> table <span class="number">6908</span></span><br><span class="line">                                      uidrange <span class="number">10000</span><span class="number">-19999</span></span><br><span class="line"></span><br><span class="line">               to <span class="number">1</span>:<span class="number">2</span>:<span class="number">3</span>:<span class="number">4</span>:<span class="number">6</span>:<span class="number">6</span>:<span class="number">7</span>:<span class="number">0</span>/<span class="number">112</span> from <span class="number">8</span>:<span class="number">6</span>:<span class="number">5</span>:<span class="number">4</span>:<span class="number">3</span>:<span class="number">2</span>::/<span class="number">96</span> l3mdev protocol <span class="number">12</span></span><br><span class="line">                                      ip_proto UDP sport <span class="number">10</span><span class="number">-20</span> dport <span class="number">20</span><span class="number">-30</span></span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">VRRP track processes</span><br><span class="line">       The configuration block looks like:</span><br><span class="line"></span><br><span class="line">           vrrp_track_process &lt;STRING&gt; &#123;</span><br><span class="line"><span class="comment">               # process to monitor (with optional parameters)</span></span><br><span class="line">               process &lt;STRING&gt;|&lt;QUOTED_STRING&gt; [&lt;STRING&gt;|&lt;QUOTED_STRING&gt; ...]</span><br><span class="line"></span><br><span class="line"><span class="comment">               # If matching parameters, specifies a partial match (i.e. the first</span></span><br><span class="line"><span class="comment">               #   n parameters match exactly, or an initial match, i.e. the last</span></span><br><span class="line"><span class="comment">               #   parameter may be longer that the parameter configured.</span></span><br><span class="line"><span class="comment">               # To specify that a command must have no parameters, don't specify</span></span><br><span class="line"><span class="comment">               #   any parameters, but specify param_match.</span></span><br><span class="line">               param_match &#123;initial|partial&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # default weight (default is 1)</span></span><br><span class="line">               weight &lt;<span class="number">-254.</span><span class="number">.254</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # minimum number of processes for success</span></span><br><span class="line">               quorum NUM</span><br><span class="line"></span><br><span class="line"><span class="comment">               # maximum number of processes for success. For example, setting</span></span><br><span class="line"><span class="comment">               #   this to 1 would cause a failure if two instances of the process</span></span><br><span class="line"><span class="comment">               #   were running (but beware forks - see fork_delay below).</span></span><br><span class="line"><span class="comment">               #   Setting this to 0 would mean failure if the matching process were</span></span><br><span class="line"><span class="comment">               #   running at all.</span></span><br><span class="line">               quorum_max NUM</span><br><span class="line"></span><br><span class="line"><span class="comment">	       # time to delay after process quorum gained after fork before</span></span><br><span class="line"><span class="comment">	       #   consider process up (in fractions of second)</span></span><br><span class="line"><span class="comment">	       #   This is to avoid up/down bounce for fork/exec</span></span><br><span class="line">	       fork_delay</span><br><span class="line">  </span><br><span class="line"><span class="comment">               # time to delay after process quorum lost before</span></span><br><span class="line"><span class="comment">	       #   consider process down (in fractions of second)</span></span><br><span class="line"><span class="comment">	       #   This is to avoid down/up bounce after terminate/parent refork.</span></span><br><span class="line">	       terminate_delay SECS</span><br><span class="line"></span><br><span class="line"><span class="comment">	       # this sets fork_delay and terminate_delay</span></span><br><span class="line">               delay SECS</span><br><span class="line"></span><br><span class="line"><span class="comment">               # Normally process string is matched against the process name,</span></span><br><span class="line"><span class="comment">	       #   as shown on the Name: line in /proc/PID/status, unless</span></span><br><span class="line"><span class="comment">	       #   parameters are specified.</span></span><br><span class="line"><span class="comment">	       #   This option forces matching the full command line</span></span><br><span class="line">               full_command</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       To  avoid  having to frequently run a track_script to monitor the exis-</span><br><span class="line">       tance of processes (often haproxy  or  nginx),  vrrp_track_process  can</span><br><span class="line">       monitor whether other processes are running.</span><br><span class="line"></span><br><span class="line">       One difference from pgrep is track_process doesn't do a regular expres-</span><br><span class="line">       sion match of the command <span class="keyword">string</span>, but does an exact match. 'pgrep  ssh'</span><br><span class="line">       will  match an sshd process, this track_process will not (it is equiva-</span><br><span class="line">       lent to pgrep <span class="string">"^ssh$"</span>).</span><br><span class="line"></span><br><span class="line">       If full_command is used (equivalent to pgrep -f), /<span class="keyword">proc</span>/PID/cmdline<span class="title">  is</span></span><br><span class="line"><span class="title"></span> <span class="title">      used,</span> <span class="title"> but</span> <span class="title"> any</span> <span class="title"> updates</span> <span class="title"> to</span> <span class="title"> cmdline</span> <span class="title"> will</span> <span class="title"> not</span> be<span class="title"> detected</span> (a<span class="title"> process</span></span><br><span class="line"><span class="title"></span> <span class="title">      shouldn't</span> normally<span class="title"> change</span> it,<span class="title"> although</span> it<span class="title"> is</span> possible<span class="title"> with</span> great<span class="title">  care,</span></span><br><span class="line"><span class="title"></span> <span class="title">      for</span> example<span class="title"> systemd).</span></span><br><span class="line"><span class="title"></span></span><br><span class="line"><span class="title"></span> <span class="title">      Prior</span> to<span class="title"> Linux</span> v3.2<span class="title"> track_process</span> will<span class="title"> not</span> support<span class="title"> detection</span> of<span class="title"> changes</span></span><br><span class="line"><span class="title"></span> <span class="title">      to</span> a<span class="title"> process</span> name,<span class="title"> since</span> the<span class="title"> kernel</span> did<span class="title"> not</span> notify<span class="title"> changes</span> <span class="title"> of</span> <span class="title"> process</span></span><br><span class="line"><span class="title"></span> <span class="title">      name</span> <span class="title"> prior</span> <span class="title"> to</span>  3.2.<span class="title">  Most</span> processes<span class="title"> do</span> not<span class="title"> change</span> their<span class="title"> process</span> name,</span><br><span class="line"><span class="title">       but,</span> for<span class="title"> example,</span> firefox<span class="title"> forks</span> processes<span class="title">  that</span> <span class="title"> change</span> <span class="title"> their</span> <span class="title"> process</span></span><br><span class="line"><span class="title"></span> <span class="title">      name</span> <span class="title"> to</span>  "Web<span class="title">  Content".</span> The<span class="title"> process</span> name<span class="title"> referred</span> to<span class="title"> here</span> is<span class="title"> the</span> con-</span><br><span class="line"><span class="title">       tents</span> of /<span class="keyword">proc</span>/PID/comm.</span><br><span class="line"></span><br><span class="line"><span class="title">       Quorum</span> <span class="title"> is</span> <span class="title"> the</span> number<span class="title"> of</span> matching<span class="title"> processes</span> that<span class="title"> must</span> be<span class="title"> run</span> for<span class="title"> an</span> OK</span><br><span class="line"><span class="title">       status.</span></span><br><span class="line"><span class="title"></span></span><br><span class="line"><span class="title"></span> <span class="title">      Delay</span> might<span class="title"> be</span> useful<span class="title"> if</span> it<span class="title"> anticipated</span> that<span class="title"> a</span> process<span class="title"> may</span> be<span class="title">  reloaded</span></span><br><span class="line"><span class="title"></span>       (stopped<span class="title">  and</span> <span class="title"> restarted),</span> <span class="title"> and</span> <span class="title"> it</span> isn't<span class="title"> desired</span> to<span class="title"> down</span> and<span class="title"> up</span> a<span class="title"> vrrp</span></span><br><span class="line"><span class="title"></span> <span class="title">      instance.</span></span><br><span class="line"><span class="title"></span></span><br><span class="line"><span class="title"></span> <span class="title">      A</span> positive<span class="title"> weight</span> means<span class="title"> that</span> an<span class="title"> OK</span> status<span class="title"> will</span> <span class="title"> add</span>  &lt;weight&gt;<span class="title">  to</span></span><br><span class="line"><span class="title"></span> <span class="title">      the</span> priority<span class="title"> of</span> all<span class="title"> VRRP</span> instances<span class="title"> which</span> monitor<span class="title"> it.</span> On<span class="title"> the</span> opposite,<span class="title"> a</span></span><br><span class="line"><span class="title"></span> <span class="title">      negative</span> weight<span class="title"> will</span> be<span class="title"> subtracted</span> from<span class="title"> the</span> initial<span class="title"> priority</span> in<span class="title"> case</span> of</span><br><span class="line"><span class="title">       insufficient</span> processes.</span><br><span class="line"></span><br><span class="line"><span class="title">       If</span> <span class="title"> the</span> <span class="title"> vrrp</span> <span class="title"> instance</span> <span class="title"> or</span> sync<span class="title"> group</span> is<span class="title"> not</span> the<span class="title"> address</span> owner<span class="title"> and</span> the</span><br><span class="line"><span class="title">       result</span> is<span class="title"> between</span> -253<span class="title"> and</span> 253,<span class="title"> the</span> result<span class="title"> will</span> be<span class="title"> added</span> to<span class="title"> the</span> initial</span><br><span class="line"><span class="title">       priority</span> <span class="title"> of</span> the<span class="title"> VRRP</span> instance (a<span class="title"> negative</span> value<span class="title"> will</span> reduce<span class="title"> the</span> prior-</span><br><span class="line"><span class="title">       ity),</span> although<span class="title"> the</span> effective<span class="title"> priority</span> will<span class="title">  be</span> <span class="title"> limited</span> <span class="title"> to</span> <span class="title"> the</span> <span class="title"> range</span></span><br><span class="line"><span class="title"></span>       [1,254].</span><br><span class="line"></span><br><span class="line"><span class="title">       If</span> <span class="title"> a</span> <span class="title"> vrrp</span> instance<span class="title"> using</span> a<span class="title"> track_process</span> is<span class="title"> a</span> member<span class="title"> of</span> a<span class="title"> sync</span> group,</span><br><span class="line"><span class="title">       unless</span> sync_group_tracking_weight<span class="title"> is</span> set<span class="title"> on</span> the<span class="title"> group</span> weight 0<span class="title"> must</span> <span class="title"> be</span></span><br><span class="line"><span class="title"></span> <span class="title">      set.</span> <span class="title">  Likewise,</span> <span class="title"> if</span> <span class="title"> the</span> <span class="title"> vrrp</span> instance<span class="title"> is</span> the<span class="title"> address</span> owner,<span class="title"> weight</span> 0</span><br><span class="line"><span class="title">       must</span> also<span class="title"> be</span> set.</span><br><span class="line"></span><br><span class="line"><span class="title">       Rational</span> for<span class="title"> not</span> using<span class="title"> pgrep/pidof/killall</span> and<span class="title"> the</span> likes:</span><br><span class="line"></span><br><span class="line"><span class="title">       Every</span> time<span class="title"> pgrep</span> or<span class="title"> its</span> equivalent<span class="title">  is</span> <span class="title"> run,</span> <span class="title"> it</span> <span class="title"> iterates</span> <span class="title"> though</span> <span class="title"> the</span></span><br><span class="line"><span class="title"></span>       /<span class="keyword">proc</span>/[1-9][0-9]*<span class="title">  directories,</span> and<span class="title"> opens</span> the<span class="title"> status</span> and<span class="title"> cmdline</span> pseudo</span><br><span class="line"><span class="title">       files</span> in<span class="title"> each</span> directory.<span class="title">  The</span> cmdline<span class="title"> pseudo</span> <span class="title"> file</span> <span class="title"> is</span> <span class="title"> mapped</span> <span class="title"> to</span> <span class="title"> the</span></span><br><span class="line"><span class="title"></span> <span class="title">      process's</span> <span class="title"> address</span> space,<span class="title"> and</span> so<span class="title"> if</span> that<span class="title"> part</span> of<span class="title"> the</span> process<span class="title"> is</span> swapped</span><br><span class="line"><span class="title">       out,</span> it<span class="title"> will</span> have<span class="title"> to</span> be<span class="title"> fetched</span> from<span class="title"> the</span> swap<span class="title"> space.</span> <span class="title">  pgrep</span> <span class="title"> etc</span> <span class="title"> also</span></span><br><span class="line"><span class="title"></span> <span class="title">      include</span> zombie<span class="title"> processes</span> whereas<span class="title"> keepalived</span> does<span class="title"> not,</span> since<span class="title"> they</span> aren't</span><br><span class="line"><span class="title">       running.</span></span><br><span class="line"><span class="title"></span></span><br><span class="line"><span class="title"></span> <span class="title">      This</span> implementation<span class="title"> only</span> iterates<span class="title"> though</span> /<span class="keyword">proc</span>/[1-9][0-9]*/<span class="title"> directories</span></span><br><span class="line"><span class="title"></span> <span class="title">      at</span> <span class="title"> start</span> <span class="title"> up,</span> <span class="title"> and</span> <span class="title"> it</span> <span class="title"> won't</span> <span class="title"> even</span> <span class="title"> read</span> <span class="title"> the</span> cmdline<span class="title"> pseudo</span> files<span class="title"> if</span></span><br><span class="line"><span class="title"></span>       'full_command'<span class="title"> is</span> not<span class="title">  specified</span> <span class="title"> for</span> <span class="title"> any</span> <span class="title"> of</span> <span class="title"> the</span> <span class="title"> vrrp_track_process</span></span><br><span class="line"><span class="title"></span> <span class="title">      entries.</span> <span class="title"> After</span> <span class="title"> startup,</span> <span class="title"> it</span> <span class="title"> uses</span> the<span class="title"> process_events</span> kernel &lt;-&gt;</span><br><span class="line"><span class="title">       userspace</span> connector<span class="title"> to</span> receive<span class="title">  notification</span> <span class="title"> of</span> <span class="title"> process</span> <span class="title"> changes.</span> <span class="title"> If</span></span><br><span class="line"><span class="title"></span> <span class="title">      full_command</span> <span class="title"> is</span> <span class="title"> specified</span> for<span class="title"> any</span> track_process<span class="title"> instance,</span> the<span class="title"> cmdline</span></span><br><span class="line"><span class="title"></span> <span class="title">      pseudo</span> file<span class="title"> will</span> have<span class="title"> to</span> be<span class="title"> read</span> upon<span class="title"> notification</span> of<span class="title"> the</span> <span class="title"> creation</span> <span class="title"> of</span></span><br><span class="line"><span class="title"></span> <span class="title">      the</span> new<span class="title"> process,</span> but<span class="title"> at</span> that<span class="title"> time</span> it<span class="title"> is</span> very<span class="title"> unlikely</span> that<span class="title"> it</span> will<span class="title"> have</span></span><br><span class="line"><span class="title"></span> <span class="title">      already</span> been<span class="title"> swapped</span> out.</span><br><span class="line"></span><br><span class="line"><span class="title">       On</span> a<span class="title"> busy</span> system<span class="title"> with</span> a<span class="title"> high</span> number<span class="title"> of</span> process<span class="title">  creations/terminations,</span></span><br><span class="line"><span class="title"></span> <span class="title">      using</span> <span class="title"> a</span> <span class="title"> track_script</span> <span class="title"> with</span> pgrep/pidof/killall<span class="title"> may</span> be<span class="title"> more</span> efficient,</span><br><span class="line"><span class="title">       although</span> those<span class="title"> processes</span> are<span class="title"> inefficient</span> compared<span class="title"> to</span> the<span class="title">  minimum</span> <span class="title"> that</span></span><br><span class="line"><span class="title"></span> <span class="title">      keepalived</span> needs.</span><br><span class="line"></span><br><span class="line"><span class="title">       Using</span> <span class="title"> pgrep</span> <span class="title"> etc</span> <span class="title"> on</span> <span class="title"> a</span> system<span class="title"> that</span> is<span class="title"> swapping</span> can<span class="title"> have</span> a<span class="title"> significant</span></span><br><span class="line"><span class="title"></span> <span class="title">      detrimental</span> impact<span class="title"> on</span> the<span class="title"> performance</span> of<span class="title"> the</span> system,<span class="title"> due</span> to<span class="title">  having</span> <span class="title"> to</span></span><br><span class="line"><span class="title"></span> <span class="title">      fetch</span> <span class="title"> swapped</span> <span class="title"> memory</span> <span class="title"> from</span> the<span class="title"> swap</span> space,<span class="title"> thereby</span> causing<span class="title"> additional</span></span><br><span class="line"><span class="title"></span> <span class="title">      swapping.</span></span><br><span class="line"><span class="title"></span></span><br><span class="line"><span class="title">BFD</span> CONFIGURATION</span><br><span class="line"><span class="title">       This</span> <span class="title"> is</span> <span class="title"> an</span> implementation<span class="title"> of</span> RFC5880 (Bidirectional<span class="title"> forwarding</span> detec-</span><br><span class="line"><span class="title">       tion),</span> and<span class="title">  this</span> <span class="title"> can</span> <span class="title"> be</span> <span class="title"> configured</span> <span class="title"> to</span> <span class="title"> work</span> <span class="title"> between</span>  2<span class="title">  keepalived</span></span><br><span class="line"><span class="title"></span> <span class="title">      instances,</span> but<span class="title"> using</span> unweighted<span class="title"> track_bfds</span> between<span class="title"> a</span> master/backup<span class="title"> pair</span></span><br><span class="line"><span class="title"></span> <span class="title">      of</span> VRRP<span class="title"> instances</span> means<span class="title"> that</span> the<span class="title"> VRRP</span> instance<span class="title"> will</span> <span class="title"> only</span> <span class="title"> be</span> <span class="title"> able</span> <span class="title"> to</span></span><br><span class="line"><span class="title"></span> <span class="title">      come</span> <span class="title"> up</span> <span class="title"> if</span> both<span class="title"> VRRP</span> instance<span class="title"> are</span> running,<span class="title"> which</span> somewhat<span class="title"> defeats</span> the</span><br><span class="line"><span class="title">       purpose</span> of<span class="title"> VRRP.</span></span><br><span class="line"><span class="title"></span></span><br><span class="line"><span class="title"></span> <span class="title">      This</span> <span class="title"> imlpementation</span> <span class="title"> has</span> <span class="title"> been</span> <span class="title"> tested</span> <span class="title"> with</span> <span class="title"> OpenBFDD</span>  (available<span class="title">  at</span></span><br><span class="line"><span class="title"></span> <span class="title">      https://github.com/dyninc/OpenBFDD).</span></span><br><span class="line"><span class="title"></span></span><br><span class="line"><span class="title"></span> <span class="title">      The</span> syntax<span class="title"> for</span> bfd<span class="title"> instance</span> is :</span><br><span class="line"></span><br><span class="line"><span class="title">       bfd_instance</span> &lt;STRING&gt; &#123;</span><br><span class="line"><span class="comment">           # BFD Neighbor IP (synonym neighbour_ip)</span></span><br><span class="line">           neighbor_ip &lt;IP ADDRESS&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Source IP to use (optional)</span></span><br><span class="line">           source_ip &lt;IP ADDRESS&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Required min RX interval, in ms</span></span><br><span class="line"><span class="comment">           # (default is 10 ms)</span></span><br><span class="line">           min_rx &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Desired min TX interval, in ms</span></span><br><span class="line"><span class="comment">           # (default is 10 ms)</span></span><br><span class="line">           min_tx &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Desired idle TX interval, in ms</span></span><br><span class="line"><span class="comment">           # (default is 1000 ms)</span></span><br><span class="line">           idle_tx &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Number of missed packets after</span></span><br><span class="line"><span class="comment">           # which the session is declared down</span></span><br><span class="line"><span class="comment">           # (default is 5)</span></span><br><span class="line">           multiplier &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Operate in passive mode (default is active)</span></span><br><span class="line">           passive</span><br><span class="line"></span><br><span class="line"><span class="comment">           # outgoing IPv4 ttl to use (default 255)</span></span><br><span class="line">           ttl &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # outgoing IPv6 hoplimit to use (default 64)</span></span><br><span class="line">           hoplimit &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # maximum reduction of ttl/hoplimit</span></span><br><span class="line"><span class="comment">           #  in received packet (default 0)</span></span><br><span class="line"><span class="comment">           #  (255 disables hop count checking)</span></span><br><span class="line">           max_hops &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Default tracking weight</span></span><br><span class="line">           weight</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">VRRPD CONFIGURATION</span><br><span class="line">       contains  subblocks  of  VRRP  script(s),  VRRP synchronization</span><br><span class="line">       group(s), VRRP gratuitous ARP and unsolicited  neighbour  advert  delay</span><br><span class="line">       group(s) and VRRP instance(s)</span><br><span class="line"></span><br><span class="line">VRRP script(s)</span><br><span class="line">       The  script  will be executed periodically, every &lt;interval&gt; sec-</span><br><span class="line">       onds. Its <span class="keyword">exit</span> code will be recorded <span class="keyword">for</span> all VRRP instances which moni-</span><br><span class="line">       tor  it.   Note  that  the script will only be executed <span class="keyword">if</span> at least one</span><br><span class="line">       VRRP instance monitors it.</span><br><span class="line"></span><br><span class="line">       The default weight equals <span class="number">0</span>, which means that any VRRP  instance  moni-</span><br><span class="line">       toring the script will transition to the fault state <span class="keyword">after</span> &lt;fall&gt;</span><br><span class="line">       consecutive failures of the script. After that,  &lt;rise&gt;  consecu-</span><br><span class="line">       tive  successes  will  cause  VRRP  instances to leave the fault state,</span><br><span class="line">       unless they are also in the fault state due to other scripts or  inter-</span><br><span class="line">       faces that they are tracking.</span><br><span class="line"></span><br><span class="line">       A   positive   weight   means  that  &lt;rise&gt;  successes  will  add</span><br><span class="line">       &lt;weight&gt; to the priority of all VRRP instances which monitor  it.</span><br><span class="line">       On  the opposite, a negative weight will be subtracted from the initial</span><br><span class="line">       priority in case of &lt;fall&gt; failures.</span><br><span class="line"></span><br><span class="line">       The syntax <span class="keyword">for</span> the vrrp script is:</span><br><span class="line"></span><br><span class="line"><span class="comment">       # Adds a script to be executed periodically. Its exit code will be</span></span><br><span class="line"><span class="comment">       # recorded for all VRRP instances and sync groups which are monitoring it.</span></span><br><span class="line">       vrrp_script &lt;SCRIPT_NAME&gt; &#123;</span><br><span class="line"><span class="comment">           # path of the script to execute</span></span><br><span class="line">           script &lt;STRING&gt;|&lt;QUOTED-STRING&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # seconds between script invocations, (default: 1 second)</span></span><br><span class="line">           interval &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # seconds after which script is considered to have failed</span></span><br><span class="line">           timeout &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # adjust priority by this weight, (default: 0)</span></span><br><span class="line">           weight &lt;INTEGER:<span class="number">-253.</span><span class="number">.253</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # required number of successes for OK transition</span></span><br><span class="line">           rise &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # required number of successes for KO transition</span></span><br><span class="line">           fall &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # user/group names to run script under.</span></span><br><span class="line"><span class="comment">           #  group default to group of user</span></span><br><span class="line">           user USERNAME [GROUPNAME]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # assume script initially is in failed state</span></span><br><span class="line">           init_fail</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">VRRP track files</span><br><span class="line">       Adds a <span class="keyword">file</span> to be monitored. The script will be  <span class="keyword">read</span>  whenever  it  is</span><br><span class="line">       modified. The value in the <span class="keyword">file</span> will be recorded <span class="keyword">for</span> all VRRP instances</span><br><span class="line">       and sync groups which monitor it.  Note that the <span class="keyword">file</span> will only be <span class="keyword">read</span></span><br><span class="line">       <span class="keyword">if</span> at least one VRRP instance or sync group monitors it.</span><br><span class="line"></span><br><span class="line">       A  value will be <span class="keyword">read</span> as a number in text from the <span class="keyword">file</span>.  If the weight</span><br><span class="line">       configured against the track_file is <span class="number">0</span>, a non-zero value  in  the  <span class="keyword">file</span></span><br><span class="line">       will  be  treated as a failure status, and a zero value will be treaded</span><br><span class="line">       as an OK status, otherwise the value will be  multiplied by the  weight</span><br><span class="line">       configured in the track_file statement. If the result is less than <span class="number">-253</span></span><br><span class="line">       any VRRP instance or sync group monitoring the script  will  transition</span><br><span class="line">       to the fault state (the weight can be <span class="number">254</span> to allow <span class="keyword">for</span> a negative value</span><br><span class="line">       being <span class="keyword">read</span> from the <span class="keyword">file</span>).</span><br><span class="line"></span><br><span class="line">       If the vrrp instance or sync group is not the  address  owner  and  the</span><br><span class="line">       result is between <span class="number">-253</span> and <span class="number">253</span>, the result will be added to the initial</span><br><span class="line">       priority of the VRRP instance (a negative value will reduce the  prior-</span><br><span class="line">       ity),  although  the  effective  priority  will be limited to the range</span><br><span class="line">       [<span class="number">1</span>,<span class="number">254</span>].</span><br><span class="line"></span><br><span class="line">       If a vrrp instance using a track_file is a  member  of  a  sync  group,</span><br><span class="line">       unless  sync_group_tracking_weight is <span class="keyword">set</span> on the group weight <span class="number">0</span> must be</span><br><span class="line">       <span class="keyword">set</span>.  Likewise, <span class="keyword">if</span> the vrrp instance is the  address  owner,  weight  <span class="number">0</span></span><br><span class="line">       must also be <span class="keyword">set</span>.</span><br><span class="line"></span><br><span class="line">       The syntax <span class="keyword">for</span> vrrp track <span class="keyword">file</span> is :</span><br><span class="line"></span><br><span class="line">       vrrp_track_file &lt;STRING&gt; &#123;    # VRRP track <span class="keyword">file</span> declaration</span><br><span class="line"><span class="comment">           # file to track (weight defaults to 1)</span></span><br><span class="line">           <span class="keyword">file</span> &lt;QUOTED_STRING&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # optional default weight</span></span><br><span class="line">           weight &lt;<span class="number">-254.</span><span class="number">.254</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # create the file and/or initialise the value</span></span><br><span class="line"><span class="comment">           # This causes VALUE (default 0) to be written to</span></span><br><span class="line"><span class="comment">           # the specified file at startup if the file doesn't</span></span><br><span class="line"><span class="comment">           # exist, unless overwrite is specified in which case</span></span><br><span class="line"><span class="comment">           # any existing file contents will be overwritten with</span></span><br><span class="line"><span class="comment">           # the specified value.</span></span><br><span class="line">           init_file [VALUE] [overwrite]</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">VRRP synchronization group(s)</span><br><span class="line">       VRRP  Sync  Group is an extension to VRRP protocol. The main goal is to</span><br><span class="line">       define a bundle of VRRP instance to get synchronized together  so  that</span><br><span class="line">       transition of one instance will be reflected to others group members.</span><br><span class="line"></span><br><span class="line">       In  addition there is an enhanced notify feature <span class="keyword">for</span> fine state transi-</span><br><span class="line">       tion catching.</span><br><span class="line"></span><br><span class="line">       You can also define multiple track policy in order to force state tran-</span><br><span class="line">       sition  according  to  a  third party event such as interface, scripts,</span><br><span class="line">       <span class="keyword">file</span>, BFD.</span><br><span class="line"></span><br><span class="line">       Important: <span class="keyword">for</span> a SYNC group to  run  reliably,  it  is</span><br><span class="line">       vital  that  all instances in the group are MASTER or that they are all</span><br><span class="line">       either BACKUP or FAULT. A situation with half instances  having  higher</span><br><span class="line">       priority  on  machine  A  half others with higher priority on machine B</span><br><span class="line">       will lead to constant re-elections. For this reason, when instances are</span><br><span class="line">       grouped,   any  track  scripts/files  configured  against  member  VRRP</span><br><span class="line">       instances will have their tracking weights automatically <span class="keyword">set</span>  to  zero,</span><br><span class="line">       in order to avoid inconsistent priorities across instances.</span><br><span class="line"></span><br><span class="line">       The syntax <span class="keyword">for</span> vrrp_sync_group is :</span><br><span class="line"></span><br><span class="line">       vrrp_sync_group &lt;STRING&gt; &#123;</span><br><span class="line">           group &#123;</span><br><span class="line"><span class="comment">               # name of the vrrp_instance (see below)</span></span><br><span class="line"><span class="comment">               # Set of VRRP_Instance string</span></span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Synchronization group tracking interface, script, file &amp; bfd will</span></span><br><span class="line"><span class="comment">           # update the status/priority of all VRRP instances which are members</span></span><br><span class="line"><span class="comment">           # of the sync group.</span></span><br><span class="line">           track_interface &#123;</span><br><span class="line">               eth0</span><br><span class="line">               eth1</span><br><span class="line">               eth2 weight &lt;<span class="number">-253.</span><span class="number">.253</span>&gt;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # add a tracking script to the sync group (&lt;SCRIPT_NAME&gt; is the name</span></span><br><span class="line"><span class="comment">           # of the vrrp_script entry) go to FAULT state if any of these go down</span></span><br><span class="line"><span class="comment">           # if unweighted.</span></span><br><span class="line">           track_script &#123;</span><br><span class="line">               &lt;SCRIPT_NAME&gt;</span><br><span class="line">               &lt;SCRIPT_NAME&gt; weight &lt;<span class="number">-253.</span><span class="number">.253</span>&gt;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Files whose state we monitor, value is added to effective priority.</span></span><br><span class="line"><span class="comment">           # &lt;STRING&gt; is the name of a vrrp_status_file</span></span><br><span class="line"><span class="comment">           # weight defaults to weight configured in vrrp_track_file</span></span><br><span class="line">           track_file &#123;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt; weight &lt;<span class="number">-254.</span><span class="number">.254</span>&gt;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # BFD instances we monitor, value is added to effective priority.</span></span><br><span class="line"><span class="comment">           # &lt;STRING&gt; is the name of a BFD instance</span></span><br><span class="line">           track_bfd &#123;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt; weight &lt;INTEGER: <span class="number">-253.</span><span class="number">.253</span>&gt;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # notify scripts and alerts are optional</span></span><br><span class="line"><span class="comment">           #</span></span><br><span class="line"><span class="comment">           # filenames of scripts to run on transitions can be unquoted (if</span></span><br><span class="line"><span class="comment">           # just filename) or quoted (if it has parameters)</span></span><br><span class="line"><span class="comment">           # The username and groupname specify the user and group</span></span><br><span class="line"><span class="comment">           # under which the scripts should be run. If username is</span></span><br><span class="line"><span class="comment">           # specified, the group defaults to the group of the user.</span></span><br><span class="line"><span class="comment">           # If username is not specified, they default to the</span></span><br><span class="line"><span class="comment">           # global script_user and script_group to MASTER transition</span></span><br><span class="line">           notify_master /path/to_master.sh [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # to BACKUP transition</span></span><br><span class="line">           notify_backup /path/to_backup.sh [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # FAULT transition</span></span><br><span class="line">           notify_fault <span class="string">"/path/fault.sh VG_1"</span> [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # executed when stopping vrrp</span></span><br><span class="line">           notify_stop &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # for ANY state transition.</span></span><br><span class="line"><span class="comment">           # "notify" script is called AFTER the notify_* script(s) and</span></span><br><span class="line"><span class="comment">           # is executed with 4 additional arguments after the configured</span></span><br><span class="line"><span class="comment">           # arguments provided by Keepalived:</span></span><br><span class="line"><span class="comment">           #   $(n-3) = "GROUP"|"INSTANCE"</span></span><br><span class="line"><span class="comment">           #   $(n-2) = name of the group or instance</span></span><br><span class="line"><span class="comment">           #   $(n-1) = target state of transition (stop only applies to instances)</span></span><br><span class="line"><span class="comment">           #            ("MASTER"|"BACKUP"|"FAULT"|"STOP")</span></span><br><span class="line"><span class="comment">           #   $(n)   = priority value</span></span><br><span class="line"><span class="comment">           #   $(n-3) and $(n-1) are ALWAYS sent in uppercase, and the possible</span></span><br><span class="line"><span class="comment">           #</span></span><br><span class="line"><span class="comment">           # strings sent are the same ones listed above</span></span><br><span class="line"><span class="comment">           #   ("GROUP"/"INSTANCE", "MASTER"/"BACKUP"/"FAULT"/"STOP")</span></span><br><span class="line"><span class="comment">           # (note: STOP is only applicable to instances)</span></span><br><span class="line">           notify &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The notify fifo output is the same as the last 4 parameters for the "notify"</span></span><br><span class="line"><span class="comment">           # script, with the addition of "MASTER_RX_LOWER_PRI" instead of state for an</span></span><br><span class="line"><span class="comment">	   # instance, and also "MASTER_PRIORITY" and "BACKUP_PRIORITY" if the priority</span></span><br><span class="line"><span class="comment">           # changes and notify_priority_changes is configured.</span></span><br><span class="line"><span class="comment">           # MASTER_RX_LOWER_PRI is used if a master needs to set some external state, such</span></span><br><span class="line"><span class="comment">           # as setting a secondary IP address when using Amazon AWS; if another keepalived</span></span><br><span class="line"><span class="comment">           # has transitioned to master due to a communications break, the lower priority</span></span><br><span class="line"><span class="comment">           # instance will have taken over the secondary IP address, and the proper master</span></span><br><span class="line"><span class="comment">           # needs to be able to restore it.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # Send FIFO notifies for vrrp priority changes</span></span><br><span class="line">	   notify_priority_changes &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Send email notification during state transition,</span></span><br><span class="line"><span class="comment">           # using addresses in global_defs above (default no,</span></span><br><span class="line"><span class="comment">           # unless global smtp_alert/smtp_alert_vrrp set)</span></span><br><span class="line">           smtp_alert &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # DEPRECATED. Use track_interface, track_script and</span></span><br><span class="line"><span class="comment">           # track_file on vrrp_sync_groups instead.</span></span><br><span class="line">           global_tracking</span><br><span class="line"></span><br><span class="line"><span class="comment">           # allow sync groups to use differing weights.</span></span><br><span class="line"><span class="comment">           # This probably WON'T WORK, but is a replacement for</span></span><br><span class="line"><span class="comment">           # global_tracking in case different weights were used</span></span><br><span class="line"><span class="comment">           # across different vrrp instances in the same sync group.</span></span><br><span class="line">           sync_group_tracking_weight</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">VRRP gratuitous ARP and unsolicited neighbour advert delay group(s)</span><br><span class="line">       specifies  the  setting  of  delays between sending gratuitous ARPs and</span><br><span class="line">       unsolicited neighbour advertisements. This  is  intended  <span class="keyword">for</span>  when  an</span><br><span class="line">       upstream <span class="keyword">switch</span> is unable to handle being flooded with ARPs/NAs.</span><br><span class="line"></span><br><span class="line">       Use  interface  when the limits <span class="keyword">apply</span> on the single physical interface.</span><br><span class="line">       Use interfaces when a group of interfaces are linked to the same <span class="keyword">switch</span></span><br><span class="line">       and the limits <span class="keyword">apply</span> to the <span class="keyword">switch</span> as a whole.</span><br><span class="line"></span><br><span class="line">       Note:  Only  one  of interface or interfaces should be</span><br><span class="line">       used per block.</span><br><span class="line"></span><br><span class="line">       If the <span class="keyword">global</span> vrrp_garp_interval and/or vrrp_gna_interval are <span class="keyword">set</span>,  any</span><br><span class="line">       interfaces  that  aren't  specified  in  a  garp_group will inherit the</span><br><span class="line">       <span class="keyword">global</span> settings.</span><br><span class="line"></span><br><span class="line">       The syntax <span class="keyword">for</span> garp_group is :</span><br><span class="line"></span><br><span class="line">       garp_group &#123;</span><br><span class="line"><span class="comment">           # Sets the interval between Gratuitous ARP (in seconds, resolution microseconds)</span></span><br><span class="line">           garp_interval &lt;DECIMAL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Sets the default interval between unsolicited NA (in seconds, resolution microseconds)</span></span><br><span class="line">           gna_interval &lt;DECIMAL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The physical interface to which the intervals apply</span></span><br><span class="line">           interface &lt;STRING&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # A list of interfaces accross which the delays are aggregated.</span></span><br><span class="line">           interfaces &#123;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">VRRP instance(s)</span><br><span class="line">       A VRRP Instance is the VRRP protocol key feature. It defines  and  con-</span><br><span class="line">       figures  VRRP  behaviour  to  run  on  a  specific interface. Each VRRP</span><br><span class="line">       Instances are related to a uniq interface.</span><br><span class="line"></span><br><span class="line">       The syntax <span class="keyword">for</span> vrrp_instance is :</span><br><span class="line"></span><br><span class="line">       vrrp_instance &lt;STRING&gt; &#123;</span><br><span class="line"><span class="comment">           # Initial state, MASTER|BACKUP</span></span><br><span class="line"><span class="comment">           # As soon as the other machine(s) come up,</span></span><br><span class="line"><span class="comment">           # an election will be held and the machine</span></span><br><span class="line"><span class="comment">           # with the highest priority will become MASTER.</span></span><br><span class="line"><span class="comment">           # So the entry here doesn't matter a whole lot.</span></span><br><span class="line">           state MASTER</span><br><span class="line"></span><br><span class="line"><span class="comment">           # interface for inside_network, bound by vrrp</span></span><br><span class="line">           interface eth0</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Use VRRP Virtual MAC.</span></span><br><span class="line"><span class="comment">           # <span class="doctag">NOTE:</span> If sysctl net.ipv4.conf.all.rp_filter is set,</span></span><br><span class="line"><span class="comment">           # and this vrrp_instance is an IPv4 instance, using</span></span><br><span class="line"><span class="comment">           # this option will cause the individual interfaces to be</span></span><br><span class="line"><span class="comment">           # updated to the greater of their current setting, and</span></span><br><span class="line"><span class="comment">           # all.rp_filter, as will default.rp_filter, and all.rp_filter</span></span><br><span class="line"><span class="comment">           # will be set to 0.</span></span><br><span class="line"><span class="comment">           # The original settings are restored on termination.</span></span><br><span class="line">           use_vmac [&lt;VMAC_INTERFACE&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Send/Recv VRRP messages from base interface instead of</span></span><br><span class="line"><span class="comment">           # VMAC interface</span></span><br><span class="line">           vmac_xmit_base</span><br><span class="line"></span><br><span class="line"><span class="comment">           # force instance to use IPv6 (this option is deprecated since</span></span><br><span class="line"><span class="comment">           # the virtual ip addresses determine whether IPv4 or IPv6 is used).</span></span><br><span class="line">           native_ipv6</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Ignore VRRP interface faults (default unset)</span></span><br><span class="line">           dont_track_primary</span><br><span class="line"></span><br><span class="line"><span class="comment">           # optional, monitor these as well.</span></span><br><span class="line"><span class="comment">           # go to FAULT state if any of these go down if unweighted.</span></span><br><span class="line"><span class="comment">           # When a weight is specified in track_interface, instead of setting the vrrp</span></span><br><span class="line"><span class="comment">           # instance to the FAULT state in case of failure, its priority will be</span></span><br><span class="line"><span class="comment">           # increased by the weight when the interface is up (for positive weights),</span></span><br><span class="line"><span class="comment">           # or decreased by the weight's absolute value when the interface is down</span></span><br><span class="line"><span class="comment">           # (for negative weights). The weight must be comprised between -254 and +254</span></span><br><span class="line"><span class="comment">           # inclusive. 0 is the default behaviour which means that a failure implies a</span></span><br><span class="line"><span class="comment">           # FAULT state. The common practice is to use positive weights to count a</span></span><br><span class="line"><span class="comment">           # limited number of good services so that the server with the highest count</span></span><br><span class="line"><span class="comment">           # becomes master. Negative weights are better to count unexpected failures</span></span><br><span class="line"><span class="comment">           # among a high number of interfaces, as it will not saturate even with high</span></span><br><span class="line"><span class="comment">           # number of interfaces.</span></span><br><span class="line">           track_interface &#123;</span><br><span class="line">               eth0</span><br><span class="line">               eth1</span><br><span class="line">               eth2 weight &lt;<span class="number">-253.</span><span class="number">.253</span>&gt;</span><br><span class="line">                ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # add a tracking script to the interface</span></span><br><span class="line"><span class="comment">           # (&lt;SCRIPT_NAME&gt; is the name of the vrrp_track_script entry)</span></span><br><span class="line"><span class="comment">           # The same principle as track_interface can be applied to track_script entries,</span></span><br><span class="line"><span class="comment">           # except that an unspecified weight means that the default weight declared in</span></span><br><span class="line"><span class="comment">           # the script will be used (which itself defaults to 0).</span></span><br><span class="line">           track_script &#123;</span><br><span class="line">               &lt;SCRIPT_NAME&gt;</span><br><span class="line">               &lt;SCRIPT_NAME&gt; weight &lt;<span class="number">-253.</span><span class="number">.253</span>&gt;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Files whose state we monitor, value is added to effective priority.</span></span><br><span class="line"><span class="comment">           # &lt;STRING&gt; is the name of a vrrp_track_file</span></span><br><span class="line">           track_file &#123;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt; weight &lt;<span class="number">-254.</span><span class="number">.254</span>&gt;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # BFD instances we monitor, value is added to effective priority.</span></span><br><span class="line"><span class="comment">           # &lt;STRING&gt; is the name of a BFD instance</span></span><br><span class="line">           track_bfd &#123;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt;</span><br><span class="line">               &lt;STRING&gt; weight &lt;INTEGER: <span class="number">-253.</span><span class="number">.253</span>&gt;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # default IP for binding vrrpd is the primary IP</span></span><br><span class="line"><span class="comment">           # on interface. If you want to hide the location of vrrpd,</span></span><br><span class="line"><span class="comment">           # use this IP as src_addr for multicast or unicast vrrp</span></span><br><span class="line"><span class="comment">           # packets. (since it's multicast, vrrpd will get the reply</span></span><br><span class="line"><span class="comment">           # packet no matter what src_addr is used).</span></span><br><span class="line"><span class="comment">           # optional</span></span><br><span class="line">           mcast_src_ip &lt;IPADDR&gt;</span><br><span class="line">           unicast_src_ip &lt;IPADDR&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # if the configured src_ip doesn't exist or is removed put the</span></span><br><span class="line"><span class="comment">           # instance into fault state</span></span><br><span class="line">           track_src_ip</span><br><span class="line"></span><br><span class="line"><span class="comment">           # VRRP version to run on interface</span></span><br><span class="line"><span class="comment">	   # default is global parameter vrrp_version, but IPv6 instances will</span></span><br><span class="line"><span class="comment">	   # always use version 3.</span></span><br><span class="line">           version &lt;<span class="number">2</span> or <span class="number">3</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Do not send VRRP adverts over a VRRP multicast group.</span></span><br><span class="line"><span class="comment">           # Instead it sends adverts to the following list of</span></span><br><span class="line"><span class="comment">           # ip addresses using unicast. It can be cool to use</span></span><br><span class="line"><span class="comment">           # the VRRP FSM and features in a networking</span></span><br><span class="line"><span class="comment">           # environment where multicast is not supported!</span></span><br><span class="line"><span class="comment">           # IP addresses specified can be IPv4 as well as IPv6.</span></span><br><span class="line">           unicast_peer &#123;</span><br><span class="line">               &lt;IPADDR&gt;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The checksum calculation when using VRRPv3 changed after v1.3.6.</span></span><br><span class="line"><span class="comment">           #  Setting this flag forces the old checksum algorithm to be used</span></span><br><span class="line"><span class="comment">           #  to maintain backward compatibility, although keepalived will</span></span><br><span class="line"><span class="comment">           #  attempt to maintain compatibility anyway if it sees an old</span></span><br><span class="line"><span class="comment">           #  version checksum. Specifying never will turn off auto detection</span></span><br><span class="line"><span class="comment">           #  of old checksums. [This option may not be enabled - check output</span></span><br><span class="line"><span class="comment">           #  of `keepalived -v` for OLD_CHKSUM_COMPAT.]</span></span><br><span class="line">           old_unicast_checksum [never]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # interface specific settings, same as global parameters.</span></span><br><span class="line"><span class="comment">           # default to global parameters</span></span><br><span class="line">           garp_master_delay <span class="number">10</span></span><br><span class="line">           garp_master_repeat <span class="number">1</span></span><br><span class="line">           garp_lower_prio_delay <span class="number">10</span></span><br><span class="line">           garp_lower_prio_repeat <span class="number">1</span></span><br><span class="line">           garp_master_refresh <span class="number">60</span></span><br><span class="line">           garp_master_refresh_repeat <span class="number">2</span></span><br><span class="line">           garp_interval <span class="number">100</span></span><br><span class="line">           gna_interval <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # If a lower priority advert is received, don't send another advert.</span></span><br><span class="line"><span class="comment">           # This causes adherence to the RFCs (defaults to global</span></span><br><span class="line"><span class="comment">           # vrrp_lower_priority_dont_send_advert).</span></span><br><span class="line">           lower_prio_no_advert [&lt;BOOL&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # If we are master and receive a higher priority advert, send an advert</span></span><br><span class="line"><span class="comment">           # (which will be lower priority than the other master), before we transition</span></span><br><span class="line"><span class="comment">           # to backup. This means that if the other master has garp_lower_prio_repeat</span></span><br><span class="line"><span class="comment">           # set, it will resend garp messages. This is to get around the problem of</span></span><br><span class="line"><span class="comment">           # their having been two simultaneous masters, and the last GARP</span></span><br><span class="line"><span class="comment">           # messages seen were from us.</span></span><br><span class="line">           higher_prio_send_advert [&lt;BOOL&gt;]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # arbitrary unique number from 0 to 255</span></span><br><span class="line"><span class="comment">           # used to differentiate multiple instances of vrrpd</span></span><br><span class="line"><span class="comment">           # running on the same NIC (and hence same socket).</span></span><br><span class="line">           virtual_router_id <span class="number">51</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # for electing MASTER, highest priority wins.</span></span><br><span class="line"><span class="comment">           # to be MASTER, make this 50 more than on other machines.</span></span><br><span class="line">           priority <span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # VRRP Advert interval in seconds (e.g. 0.92) (use default)</span></span><br><span class="line">           advert_int <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # Note: authentication was removed from the VRRPv2 specification by</span></span><br><span class="line"><span class="comment">           # RFC3768 in 2004.</span></span><br><span class="line"><span class="comment">           #   Use of this option is non-compliant and can cause problems; avoid</span></span><br><span class="line"><span class="comment">           #   using if possible, except when using unicast, where it can be helpful.</span></span><br><span class="line">           authentication &#123;</span><br><span class="line"><span class="comment">               # PASS|AH</span></span><br><span class="line"><span class="comment">               # PASS - Simple password (suggested)</span></span><br><span class="line"><span class="comment">               # AH - IPSEC (not recommended))</span></span><br><span class="line">               auth_type PASS</span><br><span class="line"></span><br><span class="line"><span class="comment">               # Password for accessing vrrpd.</span></span><br><span class="line"><span class="comment">               # should be the same on all machines.</span></span><br><span class="line"><span class="comment">               # Only the first eight (8) characters are used.</span></span><br><span class="line">               auth_pass <span class="number">1234</span></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # addresses add|del on change to MASTER, to BACKUP.</span></span><br><span class="line"><span class="comment">           # With the same entries on other machines,</span></span><br><span class="line"><span class="comment">           # the opposite transition will be occurring.</span></span><br><span class="line"><span class="comment">           # For virutal_ipaddress, virtual_ipaddress_excluded,</span></span><br><span class="line"><span class="comment">           #   virtual_routes and virtual_rules most of the options</span></span><br><span class="line"><span class="comment">           #   match the options of the command ip address/route/rule add.</span></span><br><span class="line"><span class="comment">           #   The track_group option only applies to static addresses/routes/rules.</span></span><br><span class="line"><span class="comment">           #   no_track is specific to keepalived and means that the</span></span><br><span class="line"><span class="comment">           #   vrrp_instance will not transition out of master state</span></span><br><span class="line"><span class="comment">           #   if the address/route/rule is deleted and the address/route/rule</span></span><br><span class="line"><span class="comment">           #   will not be reinstated until the vrrp instance next transitions</span></span><br><span class="line"><span class="comment">           #   to master.</span></span><br><span class="line"><span class="comment">           # &lt;LABEL&gt;: is optional and creates a name for the alias.</span></span><br><span class="line">                      For compatibility with <span class="string">"ifconfig"</span>, it should</span><br><span class="line">                      be of the form &lt;realdev&gt;:&lt;anytext&gt;, <span class="keyword">for</span> example</span><br><span class="line">                      eth0:<span class="number">1</span> <span class="keyword">for</span> an alias on eth0.</span><br><span class="line"><span class="comment">           # &lt;SCOPE&gt;: ("site"|"link"|"host"|"nowhere"|"global")</span></span><br><span class="line">           virtual_ipaddress &#123;</span><br><span class="line">               &lt;IPADDR&gt;[/&lt;MASK&gt;] [brd &lt;IPADDR&gt;] [dev &lt;STRING&gt;] [scope &lt;SCOPE&gt;]</span><br><span class="line">                                 [label &lt;LABEL&gt;] [peer &lt;IPADDR&gt;] [home]</span><br><span class="line">                                 [-nodad] [mngtmpaddr] [noprefixroute]</span><br><span class="line">                                 [autojoin] [no_track]</span><br><span class="line">               <span class="number">192.168</span><span class="number">.200</span><span class="number">.17</span>/<span class="number">24</span> dev eth1</span><br><span class="line">               <span class="number">192.168</span><span class="number">.200</span><span class="number">.18</span>/<span class="number">24</span> dev eth2 label eth2:<span class="number">1</span></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # VRRP IP excluded from VRRP optional.</span></span><br><span class="line"><span class="comment">           # For cases with large numbers (eg 200) of IPs</span></span><br><span class="line"><span class="comment">           # on the same interface. To decrease the number</span></span><br><span class="line"><span class="comment">           # of addresses sent in adverts, you can exclude</span></span><br><span class="line"><span class="comment">           # most IPs from adverts.</span></span><br><span class="line"><span class="comment">           # The IPs are add|del as for virtual_ipaddress.</span></span><br><span class="line"><span class="comment">           # Can also be used if you want to be able to add</span></span><br><span class="line"><span class="comment">           # a mixture of IPv4 and IPv6 addresses, since all</span></span><br><span class="line"><span class="comment">           # addresses in virtual_ipaddress must be of the</span></span><br><span class="line"><span class="comment">           # same family.</span></span><br><span class="line">           virtual_ipaddress_excluded &#123;</span><br><span class="line">               &lt;IPADDR&gt;[/&lt;MASK&gt;] [brd &lt;IPADDR&gt;] [dev &lt;STRING&gt;] [scope &lt;SCOPE&gt;]</span><br><span class="line">                                 [label &lt;LABEL&gt;] [peer &lt;IPADDR&gt;] [home]</span><br><span class="line">                                 [-nodad] [mngtmpaddr] [noprefixroute]</span><br><span class="line">                                 [autojoin] [no_track]</span><br><span class="line">               &lt;IPADDR&gt;[/&lt;MASK&gt;] ...</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set the promote_secondaries flag on the interface to stop other</span></span><br><span class="line"><span class="comment">           # addresses in the same CIDR being removed when 1 of them is removed</span></span><br><span class="line"><span class="comment">           # For example if 10.1.1.2/24 and 10.1.1.3/24 are both configured on an</span></span><br><span class="line"><span class="comment">           # interface, and one is removed, unless promote_secondaries is set on</span></span><br><span class="line"><span class="comment">           # the interface the other address will also be removed.</span></span><br><span class="line">	   prompte_secondaries</span><br><span class="line"></span><br><span class="line"><span class="comment">           # routes add|del when changing to MASTER, to BACKUP.</span></span><br><span class="line"><span class="comment">           # See static_routes for more details</span></span><br><span class="line">           virtual_routes &#123;</span><br><span class="line"><span class="comment">               # src &lt;IPADDR&gt; [to] &lt;IPADDR&gt;/&lt;MASK&gt; via|gw &lt;IPADDR&gt;</span></span><br><span class="line"><span class="comment">               #   [or &lt;IPADDR&gt;] dev &lt;STRING&gt; scope &lt;SCOPE&gt; table &lt;TABLE&gt;</span></span><br><span class="line">               src <span class="number">192.168</span><span class="number">.100</span><span class="number">.1</span> to <span class="number">192.168</span><span class="number">.109</span><span class="number">.0</span>/<span class="number">24</span> via <span class="number">192.168</span><span class="number">.200</span><span class="number">.254</span> dev eth1</span><br><span class="line">               <span class="number">192.168</span><span class="number">.110</span><span class="number">.0</span>/<span class="number">24</span> via <span class="number">192.168</span><span class="number">.200</span><span class="number">.254</span> dev eth1</span><br><span class="line">               <span class="number">192.168</span><span class="number">.111</span><span class="number">.0</span>/<span class="number">24</span> dev eth2 no_track</span><br><span class="line">               <span class="number">192.168</span><span class="number">.112</span><span class="number">.0</span>/<span class="number">24</span> via <span class="number">192.168</span><span class="number">.100</span><span class="number">.254</span></span><br><span class="line">               <span class="number">192.168</span><span class="number">.113</span><span class="number">.0</span>/<span class="number">24</span> via <span class="number">192.168</span><span class="number">.200</span><span class="number">.254</span> or <span class="number">192.168</span><span class="number">.100</span><span class="number">.254</span> dev eth1</span><br><span class="line">               blackhole <span class="number">192.168</span><span class="number">.114</span><span class="number">.0</span>/<span class="number">24</span></span><br><span class="line">               <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">0</span> gw <span class="number">192.168</span><span class="number">.0</span><span class="number">.1</span> table <span class="number">100</span>  # To <span class="keyword">set</span> a default gateway into table <span class="number">100.</span></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # rules add|del when changing to MASTER, to BACKUP</span></span><br><span class="line"><span class="comment">           # See static_rules for more details</span></span><br><span class="line">           virtual_rules &#123;</span><br><span class="line">               from <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span>/<span class="number">24</span> table <span class="number">1</span></span><br><span class="line">               to <span class="number">192.168</span><span class="number">.2</span><span class="number">.0</span>/<span class="number">24</span> table <span class="number">1</span> no_track</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # VRRPv3 has an Accept Mode to allow the virtual router when not the</span></span><br><span class="line"><span class="comment">           # address owner to receive packets addressed to a VIP. This is the default</span></span><br><span class="line"><span class="comment">           # setting unless strict mode is set. As an extension, this also works for</span></span><br><span class="line"><span class="comment">           # VRRPv2 (RFC 3768 doesn't define an accept mode).</span></span><br><span class="line"><span class="comment">           # --</span></span><br><span class="line"><span class="comment">           # Accept packets to non address-owner</span></span><br><span class="line">           accept</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Drop packets to non address-owner.</span></span><br><span class="line">           no_accept</span><br><span class="line"></span><br><span class="line"><span class="comment">           # VRRP will normally preempt a lower priority machine when a higher priority</span></span><br><span class="line"><span class="comment">           # machine comes online.  "nopreempt" allows the lower priority machine to</span></span><br><span class="line"><span class="comment">           # maintain the master role, even when a higher priority machine comes back</span></span><br><span class="line"><span class="comment">           # online.</span></span><br><span class="line"><span class="comment">           # <span class="doctag">NOTE:</span> For this to work, the initial state of this</span></span><br><span class="line"><span class="comment">           # entry must be BACKUP.</span></span><br><span class="line"><span class="comment">           # --</span></span><br><span class="line">           nopreempt</span><br><span class="line"></span><br><span class="line"><span class="comment">           # for backwards compatibility</span></span><br><span class="line">           preempt</span><br><span class="line"></span><br><span class="line"><span class="comment">           # See description of global vrrp_skip_check_adv_addr, which</span></span><br><span class="line"><span class="comment">           # sets the default value. Defaults to vrrp_skip_check_adv_addr</span></span><br><span class="line">           skip_check_adv_addr [on|off|true|false|yes|no]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # See description of global vrrp_strict</span></span><br><span class="line"><span class="comment">           # If vrrp_strict is not specified, it takes the value of vrrp_strict</span></span><br><span class="line"><span class="comment">           # If strict_mode without a parameter is specified, it defaults to on</span></span><br><span class="line">           strict_mode [on|off|true|false|yes|no]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Seconds after startup or seeing a lower priority master until preemption</span></span><br><span class="line"><span class="comment">           # (if not disabled by "nopreempt").</span></span><br><span class="line"><span class="comment">           # Range: 0 (default) to 1000 (e.g. 4.12)</span></span><br><span class="line"><span class="comment">           # <span class="doctag">NOTE:</span> For this to work, the initial state of this</span></span><br><span class="line"><span class="comment">           # entry must be BACKUP.</span></span><br><span class="line">           preempt_delay <span class="number">300</span>    # waits <span class="number">5</span> minutes</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Debug level, not implemented yet.</span></span><br><span class="line"><span class="comment">           # LEVEL is a number in the range 0 to 4</span></span><br><span class="line">           debug &lt;LEVEL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # notify scripts, alert as above</span></span><br><span class="line">           notify_master &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line">           notify_backup &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line">           notify_fault &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"><span class="comment">           # executed when stopping vrrp</span></span><br><span class="line">           notify_stop &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line">           notify &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # The notify_master_rx_lower_pri script is executed if a master</span></span><br><span class="line"><span class="comment">           #  receives an advert with priority lower than the master's advert.</span></span><br><span class="line">           notify_master_rx_lower_pri &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Send vrrp instance priority notifications on notify FIFOs.</span></span><br><span class="line">	   notify_priority_changes &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Send SMTP alerts</span></span><br><span class="line">           smtp_alert &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set socket receive buffer size (see global_defs</span></span><br><span class="line"><span class="comment">           # vrrp_rx_bufs_policy for explanation)</span></span><br><span class="line">           kernel_rx_buf_size</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set use of linkbeat for the interface of this VRRP instance. This option is</span></span><br><span class="line"><span class="comment">           # deprecated - use linkbeat_interfaces block instead.</span></span><br><span class="line">	   linkbeat_use_polling</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">LVS CONFIGURATION</span><br><span class="line">       contains subblocks  of  Virtual  server  group(s)  and</span><br><span class="line">       Virtual server(s)</span><br><span class="line"></span><br><span class="line">       The  subblocks  contain arguments <span class="keyword">for</span> configuring Linux IPVS (LVS) fea-</span><br><span class="line">       ture.  Knowledge of ipvsadm(<span class="number">8</span>) will be helpful here. Configuring LVS is</span><br><span class="line">       achieved by defining virtual server groups, virtual servers and option-</span><br><span class="line">       ally SSL configuration. Every virtual server  defines  a  <span class="keyword">set</span>  of  real</span><br><span class="line">       servers,  you can attach healthcheckers to each real server. Keepalived</span><br><span class="line">       will then lead LVS operation by dynamically maintaining topology.</span><br><span class="line"></span><br><span class="line">       For details of what  configuration  combinations  are  valid,  see  the</span><br><span class="line">       ipvsadm(<span class="number">8</span>) man page.</span><br><span class="line"></span><br><span class="line">       Note: Where an option can be configured <span class="keyword">for</span> a  virtual</span><br><span class="line">       server,  real  server, and possibly checker, the virtual server setting</span><br><span class="line">       is the default <span class="keyword">for</span> real servers, and the real  server  setting  is  the</span><br><span class="line">       default <span class="keyword">for</span> checkers.</span><br><span class="line"></span><br><span class="line">       Note: Tunnelled real/sorry servers can differ from the</span><br><span class="line">       address family of the  virtual  server  and  non  tunnelled  real/sorry</span><br><span class="line">       servers,  which  all  have  to  be the same. If a virtual server uses a</span><br><span class="line">       fwmark, and all the real/sorry servers are tunnelled, the address  fam-</span><br><span class="line">       ily of the virtual server will be the same as the address family of the</span><br><span class="line">       real/sorry servers <span class="keyword">if</span> they are all the same, otherwise it will  default</span><br><span class="line">       to IPv4 (use ip_family inet6 to override this).</span><br><span class="line"></span><br><span class="line">       Note: The port <span class="keyword">for</span> the  virtual  server  can  only  be</span><br><span class="line">       omitted <span class="keyword">if</span> the virtual service is persistent.</span><br><span class="line"></span><br><span class="line">Virtual server group(s)</span><br><span class="line">       This feature offers a way to simplify your configuration by factorizing</span><br><span class="line">       virtual server definitions. If you need to define a  bunch  of  virtual</span><br><span class="line">       servers  with  exactly  the same real server topology then this feature</span><br><span class="line">       will make your configuration  much  more  readable  and  will  optimize</span><br><span class="line">       healthchecking  task by only spawning one healthchecking where multiple</span><br><span class="line">       virtual server declaration will spawn  a  dedicated  healthchecker  <span class="keyword">for</span></span><br><span class="line">       every real server which will waste system resources.</span><br><span class="line"></span><br><span class="line">       Any  combination  of IP addresses, IP address ranges and firewall marks</span><br><span class="line">       can be used. Use of this option is intended <span class="keyword">for</span> very large LVSs.</span><br><span class="line"></span><br><span class="line">       The syntax <span class="keyword">for</span> virtual_server_group is :</span><br><span class="line"></span><br><span class="line">       virtual_server_group &lt;STRING&gt; &#123;</span><br><span class="line"><span class="comment">           # Virtual IP Address and Port</span></span><br><span class="line">           &lt;IPADDR&gt; [&lt;PORT&gt;]</span><br><span class="line">           &lt;IPADDR&gt; [&lt;PORT&gt;]</span><br><span class="line">           ...</span><br><span class="line"><span class="comment">           # &lt;IPADDR RANGE&gt; has the form</span></span><br><span class="line"><span class="comment">           # XXX.YYY.ZZZ.WWW-VVV eg 192.168.200.1-10</span></span><br><span class="line"><span class="comment">           # range includes both .1 and .10 address</span></span><br><span class="line">           &lt;IPADDR RANGE&gt; [&lt;PORT&gt;] # VIP range [VPORT]</span><br><span class="line">           &lt;IPADDR RANGE&gt; [&lt;PORT&gt;]</span><br><span class="line">           ...</span><br><span class="line"><span class="comment">           # Firewall Mark (fwmark)</span></span><br><span class="line">           fwmark &lt;INTEGER&gt;</span><br><span class="line">           fwmark &lt;INTEGER&gt;</span><br><span class="line">           ...</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">Virtual server(s)</span><br><span class="line">       A virtual_server can be a declaration of one of  &lt;IPADDR&gt;</span><br><span class="line">       [&lt;PORT&gt;]  ,  fwmark  &lt;INTEGER&gt; or</span><br><span class="line">       group &lt;STRING&gt;</span><br><span class="line"></span><br><span class="line">       The syntax <span class="keyword">for</span> virtual_server is :</span><br><span class="line"></span><br><span class="line">       virtual_server &lt;IPADDR&gt; [&lt;PORT&gt;]  |</span><br><span class="line">       virtual_server fwmark &lt;INTEGER&gt; |</span><br><span class="line">       virtual_server group &lt;STRING&gt; &#123;</span><br><span class="line"><span class="comment">           # LVS scheduler</span></span><br><span class="line">           lvs_sched rr|wrr|lc|wlc|lblc|sh|mh|dh|fo|ovf|lblcr|sed|nq</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Enable hashed entry</span></span><br><span class="line">           hashed</span><br><span class="line"><span class="comment">           # Enable flag-1 for scheduler (-b flag-1 in ipvsadm)</span></span><br><span class="line">           flag<span class="number">-1</span></span><br><span class="line"><span class="comment">           # Enable flag-2 for scheduler (-b flag-2 in ipvsadm)</span></span><br><span class="line">           flag<span class="number">-2</span></span><br><span class="line"><span class="comment">           # Enable flag-3 for scheduler (-b flag-3 in ipvsadm)</span></span><br><span class="line">           flag<span class="number">-3</span></span><br><span class="line"><span class="comment">           # Enable sh-port for sh scheduler (-b sh-port in ipvsadm)</span></span><br><span class="line">           sh-port</span><br><span class="line"><span class="comment">           # Enable sh-fallback for sh scheduler  (-b sh-fallback in ipvsadm)</span></span><br><span class="line">           sh-fallback</span><br><span class="line"><span class="comment">           # Enable mh-port for mh scheduler (-b mh-port in ipvsadm)</span></span><br><span class="line">           mh-port</span><br><span class="line"><span class="comment">           # Enable mh-fallback for mh scheduler  (-b mh-fallback in ipvsadm)</span></span><br><span class="line">           mh-fallback</span><br><span class="line"><span class="comment">           # Enable One-Packet-Scheduling for UDP (-O in ipvsadm)</span></span><br><span class="line">           ops</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Default LVS forwarding method</span></span><br><span class="line">           lvs_method NAT|DR|TUN</span><br><span class="line"><span class="comment">           # LVS persistence engine name</span></span><br><span class="line">           persistence_engine &lt;STRING&gt;</span><br><span class="line"><span class="comment">           # LVS persistence timeout in seconds, default 6 minutes</span></span><br><span class="line">           persistence_timeout [&lt;INTEGER&gt;]</span><br><span class="line"><span class="comment">           # LVS granularity mask (-M in ipvsadm)</span></span><br><span class="line">           persistence_granularity &lt;NETMASK&gt;</span><br><span class="line"><span class="comment">           # L4 protocol</span></span><br><span class="line">           protocol TCP|UDP|SCTP</span><br><span class="line"><span class="comment">           # If VS IP address is not set,</span></span><br><span class="line"><span class="comment">           # suspend healthchecker's activity</span></span><br><span class="line">           ha_suspend</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Send email notification during quorum up/down transition,</span></span><br><span class="line"><span class="comment">           # using addresses in global_defs above (default no,</span></span><br><span class="line"><span class="comment">           # unless global smtp_alert/smtp_alert_checker set)</span></span><br><span class="line">           smtp_alert &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Default VirtualHost string for HTTP_GET or SSL_GET</span></span><br><span class="line"><span class="comment">           # eg virtualhost www.firewall.loc</span></span><br><span class="line"><span class="comment">           # Overridden by virtualhost config of real server or checker</span></span><br><span class="line">           virtualhost &lt;STRING&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # On daemon startup assume that all RSs are down</span></span><br><span class="line"><span class="comment">           # and healthchecks failed. This helps to prevent</span></span><br><span class="line"><span class="comment">           # false positives on startup. Alpha mode is</span></span><br><span class="line"><span class="comment">           # disabled by default.</span></span><br><span class="line">           alpha</span><br><span class="line"></span><br><span class="line"><span class="comment">           # On daemon shutdown consider quorum and RS</span></span><br><span class="line"><span class="comment">           # down notifiers for execution, where appropriate.</span></span><br><span class="line"><span class="comment">           # Omega mode is disabled by default.</span></span><br><span class="line">           omega</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Minimum total weight of all live servers in</span></span><br><span class="line"><span class="comment">           # the pool necessary to operate VS with no</span></span><br><span class="line"><span class="comment">           # quality regression. Defaults to 1.</span></span><br><span class="line">           quorum &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Tolerate this much weight units compared to the</span></span><br><span class="line"><span class="comment">           # nominal quorum, when considering quorum gain</span></span><br><span class="line"><span class="comment">           # or loss. A flap dampener. Defaults to 0.</span></span><br><span class="line">           hysteresis &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Script to execute when quorum is gained.</span></span><br><span class="line">           quorum_up &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Script to execute when quorum is lost.</span></span><br><span class="line">           quorum_down &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">           # IP family for a fwmark service (optional)</span></span><br><span class="line">           ip_family inet|inet6</span><br><span class="line"></span><br><span class="line"><span class="comment">           # setup realserver(s)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">           # RS to add to LVS topology when the quorum isn't achieved.</span></span><br><span class="line"><span class="comment">           #  If a sorry server is configured, all real servers will</span></span><br><span class="line"><span class="comment">           #  be brought down when the quorum is not achieved.</span></span><br><span class="line">           sorry_server &lt;IPADDR&gt; [&lt;PORT&gt;]</span><br><span class="line"><span class="comment">           # applies inhibit_on_failure behaviour to the sorry_server</span></span><br><span class="line">           sorry_server_inhibit</span><br><span class="line"><span class="comment">           # Sorry server LVS forwarding method</span></span><br><span class="line">           sorry_server_lvs_method NAT|DR|TUN</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Optional connection timeout in seconds.</span></span><br><span class="line"><span class="comment">           # The default is 5 seconds</span></span><br><span class="line">           connect_timeout &lt;TIMER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Retry count to make additional checks if check</span></span><br><span class="line"><span class="comment">           # of an alive server fails. Default: 1 unless specified below</span></span><br><span class="line">           retry &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # delay before retry after failure</span></span><br><span class="line">           delay_before_retry &lt;TIMER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Optional random delay to start the initial check</span></span><br><span class="line"><span class="comment">           # for maximum N seconds.</span></span><br><span class="line"><span class="comment">           # Useful to scatter multiple simultaneous</span></span><br><span class="line"><span class="comment">           # checks to the same RS. Enabled by default, with</span></span><br><span class="line"><span class="comment">           # the maximum at delay_loop. Specify 0 to disable</span></span><br><span class="line">           warmup &lt;TIMER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # delay timer for checker polling</span></span><br><span class="line">           delay_loop &lt;TIMER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">           # Set weight to 0 when healthchecker detects failure</span></span><br><span class="line">           inhibit_on_failure</span><br><span class="line"></span><br><span class="line"><span class="comment">           # one entry for each realserver</span></span><br><span class="line">           real_server &lt;IPADDR&gt; [&lt;PORT&gt;] &#123;</span><br><span class="line"><span class="comment">               # relative weight to use, default: 1</span></span><br><span class="line">               weight &lt;INTEGER&gt;</span><br><span class="line"><span class="comment">               # LVS forwarding method</span></span><br><span class="line">               lvs_method NAT|DR|TUN</span><br><span class="line"></span><br><span class="line"><span class="comment">               # Script to execute when healthchecker</span></span><br><span class="line"><span class="comment">               # considers service as up.</span></span><br><span class="line">               notify_up &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"><span class="comment">               # Script to execute when healthchecker</span></span><br><span class="line"><span class="comment">               # considers service as down.</span></span><br><span class="line">               notify_down &lt;STRING&gt;|&lt;QUOTED-STRING&gt; [username [groupname]]</span><br><span class="line"></span><br><span class="line"><span class="comment">               # maximum number of connections to server</span></span><br><span class="line">               uthreshold &lt;INTEGER&gt;</span><br><span class="line"><span class="comment">               # minimum number of connections to server</span></span><br><span class="line">               lthreshold &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # Send email notification during state transition,</span></span><br><span class="line"><span class="comment">               # using addresses in global_defs above (default yes,</span></span><br><span class="line"><span class="comment">               # unless global smtp_alert/smtp_alert_checker set)</span></span><br><span class="line">               smtp_alert &lt;BOOL&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # Default VirtualHost string for HTTP_GET or SSL_GET</span></span><br><span class="line"><span class="comment">               # eg virtualhost www.firewall.loc</span></span><br><span class="line"><span class="comment">               # Overridden by virtualhost config of a checker</span></span><br><span class="line">               virtualhost &lt;STRING&gt;</span><br><span class="line"></span><br><span class="line">               alpha &lt;BOOL&gt;                    # see above</span><br><span class="line">	       connect_timeout &lt;TIMER&gt;         # see above</span><br><span class="line">               retry &lt;INTEGER&gt;                 # see above</span><br><span class="line">               delay_before_retry &lt;TIMER&gt;      # see above</span><br><span class="line">               warmup &lt;TIMER&gt;                  # see above</span><br><span class="line">               delay_loop &lt;TIMER&gt;              # see above</span><br><span class="line">               inhibit_on_failure &lt;BOOL&gt;       # see above</span><br><span class="line">               log_all_failures &lt;BOOL&gt;         # log all failures when checker up</span><br><span class="line"></span><br><span class="line"><span class="comment">               # healthcheckers. Can be multiple of each type</span></span><br><span class="line"><span class="comment">               # HTTP_GET|SSL_GET|TCP_CHECK|SMTP_CHECK|DNS_CHECK|MISC_CHECK|BFD_CHECK</span></span><br><span class="line"></span><br><span class="line"><span class="comment">               # All checkers have the following options, except MISC_CHECK</span></span><br><span class="line"><span class="comment">               # which only has options alpha onwards, and BFD_CHECK which has none</span></span><br><span class="line"><span class="comment">               # of the standard options:</span></span><br><span class="line">               CHECKER_TYPE &#123;</span><br><span class="line"><span class="comment">                   # ======== generic connection options</span></span><br><span class="line"><span class="comment">                   # Optional IP address to connect to.</span></span><br><span class="line"><span class="comment">                   # The default is the realserver IP</span></span><br><span class="line">                   connect_ip &lt;IPADDR&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">                   # Optional port to connect to</span></span><br><span class="line"><span class="comment">                   # The default is the realserver port</span></span><br><span class="line">                   connect_port &lt;PORT&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">                   # Optional address to use to</span></span><br><span class="line"><span class="comment">                   # originate the connection</span></span><br><span class="line">                   bindto &lt;IPADDR&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">                   # Optional interface to use; needed if</span></span><br><span class="line"><span class="comment">                   # the bindto address is IPv6 link local</span></span><br><span class="line">                   bind_if &lt;IFNAME&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">                   # Optional source port to</span></span><br><span class="line"><span class="comment">                   # originate the connection from</span></span><br><span class="line">                   bind_port &lt;PORT&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">                   # Optional fwmark to mark all outgoing</span></span><br><span class="line"><span class="comment">                   # checker packets with</span></span><br><span class="line">                   fwmark &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line">                   alpha &lt;BOOL&gt;                    # see above</span><br><span class="line">		   connect_timeout &lt;TIMER&gt;         # see above</span><br><span class="line">                   retry &lt;INTEGER&gt;                 # see above</span><br><span class="line">                   delay_before_retry &lt;TIMER&gt;      # see above</span><br><span class="line">                   warmup &lt;TIMER&gt;                  # see above</span><br><span class="line">                   delay_loop &lt;TIMER&gt;              # see above</span><br><span class="line">                   inhibit_on_failure &lt;BOOL&gt;       # see above</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # The following options are additional checker specific</span></span><br><span class="line"></span><br><span class="line"><span class="comment">               # HTTP and SSL healthcheckers</span></span><br><span class="line">               HTTP_GET|SSL_GET &#123;</span><br><span class="line"><span class="comment">                   # An url to test</span></span><br><span class="line"><span class="comment">                   # can have multiple entries here</span></span><br><span class="line">                   url &#123;</span><br><span class="line"><span class="comment">                     #eg path / , or path /mrtg2/</span></span><br><span class="line">                     path &lt;STRING&gt;</span><br><span class="line"><span class="comment">                     # healthcheck needs status_code</span></span><br><span class="line"><span class="comment">                     # or status_code and digest</span></span><br><span class="line"><span class="comment">                     # Digest computed with genhash</span></span><br><span class="line"><span class="comment">                     # eg digest 9b3a0c85a887a256d6939da88aabd8cd</span></span><br><span class="line">                     digest &lt;STRING&gt;</span><br><span class="line"><span class="comment">                     # status code returned in the HTTP header</span></span><br><span class="line"><span class="comment">                     # eg status_code 200. Default is any 2xx value</span></span><br><span class="line">                     status_code &lt;INTEGER&gt;</span><br><span class="line"><span class="comment">                     # VirtualHost string. eg virtualhost www.firewall.loc</span></span><br><span class="line"><span class="comment">                     # If not set, uses virtualhost from real or virtual server</span></span><br><span class="line">                     virtualhost &lt;STRING&gt;</span><br><span class="line"><span class="comment">                     # Regular expression to search returned data against.</span></span><br><span class="line"><span class="comment">                     # A failure to match causes the check to fail.</span></span><br><span class="line">                     regex &lt;STRING&gt;</span><br><span class="line"><span class="comment">                     # Reverse the sense of the match, so a match of the</span></span><br><span class="line"><span class="comment">                     # returned text causes the check to fail.</span></span><br><span class="line">                     regex_no_match</span><br><span class="line"><span class="comment">                     # Space separated list of options for regex.</span></span><br><span class="line"><span class="comment">                     #  See man pcre2api for a description of the options.</span></span><br><span class="line"><span class="comment">                     #  The following option are supported:</span></span><br><span class="line"><span class="comment">                     #   allow_empty_class alt_bsux auto_callout caseless</span></span><br><span class="line"><span class="comment">                     #   dollar_endonly dotall dupnames extended firstline</span></span><br><span class="line"><span class="comment">                     #   match_unset_backref multiline never_ucp never_utf</span></span><br><span class="line"><span class="comment">                     #   no_auto_capture no_auto_possess no_dotstar_anchor</span></span><br><span class="line"><span class="comment">                     #   no_start_optimize ucp ungreedy utf never_backslash_c</span></span><br><span class="line"><span class="comment">                     #   alt_circumflex alt_verbnames use_offset_limit</span></span><br><span class="line">                     regex_options OPTIONS </span><br><span class="line"><span class="comment">                     # For complicated regular expressions a larger stack</span></span><br><span class="line"><span class="comment">                     #   may be needed, and this allows the start and maximum</span></span><br><span class="line"><span class="comment">                     #   sizes in bytes to be specified. For more details see</span></span><br><span class="line"><span class="comment">                     #   the documentation for pcre2_jit_stack_create()</span></span><br><span class="line">                     regex_stack &lt;START&gt; &lt;MAX&gt;</span><br><span class="line"><span class="comment">                     # The minimum offset into the returned data to start</span></span><br><span class="line"><span class="comment">                     #   checking for the regex pattern match. This can save</span></span><br><span class="line"><span class="comment">                     #   processing time if the returned data is large.</span></span><br><span class="line">                     regex_min_offset &lt;OFFSET&gt;</span><br><span class="line"><span class="comment">                     # The maximum offset into the returned data for the</span></span><br><span class="line"><span class="comment">                     #   start of the subject match.</span></span><br><span class="line">                     regex_max_offset &lt;OFFSET&gt;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               SSL_GET &#123;</span><br><span class="line"><span class="comment">                   # when provided, send Server Name Indicator during SSL handshake</span></span><br><span class="line">                   enable_sni</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # TCP healthchecker</span></span><br><span class="line">               TCP_CHECK &#123;</span><br><span class="line"><span class="comment">                   # No additional options</span></span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # SMTP healthchecker</span></span><br><span class="line">               SMTP_CHECK &#123;</span><br><span class="line"><span class="comment">                   # Optional string to use for the SMTP HELO request</span></span><br><span class="line">                   helo_name &lt;STRING&gt;|&lt;QUOTED-STRING&gt;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # DNS healthchecker</span></span><br><span class="line">               DNS_CHECK &#123;</span><br><span class="line"><span class="comment">                   # The retry default is 3.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">                   # DNS query type</span></span><br><span class="line"><span class="comment">                   #   A|NS|CNAME|SOA|MX|TXT|AAAA</span></span><br><span class="line"><span class="comment">                   # The default is SOA</span></span><br><span class="line">                   type &lt;STRING&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">                   # Domain name to use for the DNS query</span></span><br><span class="line"><span class="comment">                   # The default is . (dot)</span></span><br><span class="line">                   name &lt;STRING&gt;</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # MISC healthchecker, run a program</span></span><br><span class="line">               MISC_CHECK &#123;</span><br><span class="line"><span class="comment">                   # The retry default is 0.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">                   # External script or program</span></span><br><span class="line">                   misc_path &lt;STRING&gt;|&lt;QUOTED-STRING&gt;</span><br><span class="line"><span class="comment">                   # Script execution timeout</span></span><br><span class="line">                   misc_timeout &lt;INTEGER&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">                   # If set, the exit code from healthchecker is used</span></span><br><span class="line"><span class="comment">                   # to dynamically adjust the weight as follows:</span></span><br><span class="line"><span class="comment">                   #   exit status 0: svc check success, weight</span></span><br><span class="line"><span class="comment">                   #     unchanged.</span></span><br><span class="line"><span class="comment">                   #   exit status 1: svc check failed.</span></span><br><span class="line"><span class="comment">                   #   exit status 2-255: svc check success, weight</span></span><br><span class="line"><span class="comment">                   #     changed to 2 less than exit status.</span></span><br><span class="line"><span class="comment">                   #   (for example: exit status of 255 would set</span></span><br><span class="line"><span class="comment">                   #     weight to 253)</span></span><br><span class="line"><span class="comment">                   # <span class="doctag">NOTE:</span> do not have more than one dynamic MISC_CHECK per real_server.</span></span><br><span class="line">                   misc_dynamic</span><br><span class="line"></span><br><span class="line"><span class="comment">                   # Specify the username/groupname that the script should</span></span><br><span class="line"><span class="comment">                   #   be run under.</span></span><br><span class="line"><span class="comment">                   # If GROUPNAME is not specified, the group of the user</span></span><br><span class="line"><span class="comment">                   #   is used</span></span><br><span class="line">                   user USERNAME [GROUPNAME]</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">               # BFD instance name to check</span></span><br><span class="line">               BFD_CHECK &#123;</span><br><span class="line">                   name &lt;STRING&gt;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">       # Parameters used for SSL_GET check.</span></span><br><span class="line"><span class="comment">       # If none of the parameters are specified, the SSL context</span></span><br><span class="line"><span class="comment">       # will be auto generated.</span></span><br><span class="line">       SSL &#123;</span><br><span class="line"><span class="comment">           # Password</span></span><br><span class="line">           password &lt;STRING&gt;</span><br><span class="line"><span class="comment">           # CA file</span></span><br><span class="line">           ca &lt;STRING&gt;</span><br><span class="line"><span class="comment">           # Certificate file</span></span><br><span class="line">           certificate &lt;STRING&gt;</span><br><span class="line"><span class="comment">           # Key file</span></span><br><span class="line">           key &lt;STRING&gt;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">ADVANCED CONFIGURATION</span><br><span class="line">       Configuration  parser  has  been  extended to support advanced features</span><br><span class="line">       such as conditional configuration  and  parameter  substitution.  These</span><br><span class="line">       features are very usefull <span class="keyword">for</span> any scripted env where configuration tem-</span><br><span class="line">       plate are generated (datacenters).</span><br><span class="line"></span><br><span class="line">Conditional configuration and configuration id</span><br><span class="line">       The config-id defaults to the first part of the node name  as  returned</span><br><span class="line">       by uname, and can be overridden with the -i or --config-id command line</span><br><span class="line">       option.</span><br><span class="line"></span><br><span class="line">       Any configuration line starting with '@' is a conditional configuration</span><br><span class="line">       line.   The word immediately following (i.e. without any space) the '@'</span><br><span class="line">       character is compared against the config-id, and <span class="keyword">if</span> they  don't  match,</span><br><span class="line">       the configuration line is ignored.</span><br><span class="line"></span><br><span class="line">       Alternatively,  '@^'  is  a negative comparison, so <span class="keyword">if</span> the word immedi-</span><br><span class="line">       ately following does NOT match the config-id, the configuration line IS</span><br><span class="line">       included.</span><br><span class="line"></span><br><span class="line">       The  purpose of this is to allow a single configuration <span class="keyword">file</span> to be used</span><br><span class="line">       <span class="keyword">for</span> multiple systems, where the only differences are likely to  be  the</span><br><span class="line">       router_id,  vrrp  instance priorities, and possibly interface names and</span><br><span class="line">       unicast addresses.</span><br><span class="line"></span><br><span class="line">       For example:</span><br><span class="line"></span><br><span class="line">           global_defs &#123;</span><br><span class="line">               @main   router_id main_router</span><br><span class="line">               @backup router_id backup_router</span><br><span class="line">           &#125;</span><br><span class="line">           ...</span><br><span class="line">           vrrp_instance VRRP &#123;</span><br><span class="line">               ...</span><br><span class="line">               @main    unicast_src_ip <span class="number">1.2</span><span class="number">.3</span><span class="number">.4</span></span><br><span class="line">               @backup  unicast_src_ip <span class="number">1.2</span><span class="number">.3</span><span class="number">.5</span></span><br><span class="line">               @backup2 unicast_src_ip <span class="number">1.2</span><span class="number">.3</span><span class="number">.6</span></span><br><span class="line">               unicast_peer &#123;</span><br><span class="line">                   @^main    <span class="number">1.2</span><span class="number">.3</span><span class="number">.4</span></span><br><span class="line">                   @^backup  <span class="number">1.2</span><span class="number">.3</span><span class="number">.5</span></span><br><span class="line">                   @^backup2 <span class="number">1.2</span><span class="number">.3</span><span class="number">.6</span></span><br><span class="line">               &#125;</span><br><span class="line">               ...</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       If keepalived is invoked with -i main, then the router_id will  be  <span class="keyword">set</span></span><br><span class="line">       to  main_router,  <span class="keyword">if</span> invoked with -i backup, then backup_router, <span class="keyword">if</span> not</span><br><span class="line">       invoked with -i, or with -i anything else, then the router_id will  not</span><br><span class="line">       be <span class="keyword">set</span>. The unicast peers <span class="keyword">for</span> main will be <span class="number">1.2</span><span class="number">.3</span><span class="number">.5</span> and <span class="number">1.2</span><span class="number">.3</span><span class="number">.6</span>.</span><br><span class="line"></span><br><span class="line">Parameter substitution</span><br><span class="line">       Substitutable  parameters  can  be specified. The <span class="keyword">format</span> <span class="keyword">for</span> defining a</span><br><span class="line">       parameter is:</span><br><span class="line"></span><br><span class="line">       $PARAMETER=VALUE</span><br><span class="line"></span><br><span class="line">       where there must be no space before the '='  and  only  whitespace  may</span><br><span class="line">       preceed to '$'.  Empty values are allowed.</span><br><span class="line"></span><br><span class="line">       Parameter  names  can be made up of any combination of A-Za-z0<span class="number">-9</span> and _,</span><br><span class="line">       but cannot start with a digit. Parameter names starting with an  under-</span><br><span class="line">       score  should  be considered reserved names that keepalived will define</span><br><span class="line">       <span class="keyword">for</span> various pre-defined options.</span><br><span class="line"></span><br><span class="line">       After a parameter is defined, any occurrence of $PARAMETER followed  by</span><br><span class="line">       whitespace,  or  any occurrence of $&#123;PARAMETER&#125; (which need not be fol-</span><br><span class="line">       lowed by whitespace) will be replaced by VALUE.</span><br><span class="line"></span><br><span class="line">       Replacement is recursive, so that <span class="keyword">if</span> a parameter value itself  includes</span><br><span class="line">       a replaceable parameter, then <span class="keyword">after</span> the first substitution, the parame-</span><br><span class="line">       ter in the value will then be replaced; the  substitution  is  done  at</span><br><span class="line">       replacement <span class="keyword">time</span> and not at definition <span class="keyword">time</span>, so <span class="keyword">for</span> example:</span><br><span class="line"></span><br><span class="line">           $ADDRESS_BASE=<span class="number">10.2</span>.$&#123;ADDRESS_BASE_SUB&#125;</span><br><span class="line">           $ADDRESS_BASE_SUB=<span class="number">0</span></span><br><span class="line">           $&#123;ADDRESS_BASE&#125;.<span class="number">100</span>/<span class="number">32</span></span><br><span class="line">           $ADDRESS_BASE_SUB=<span class="number">10</span></span><br><span class="line">           $&#123;ADDRESS_BASE&#125;.<span class="number">100</span>/<span class="number">32</span></span><br><span class="line"></span><br><span class="line">           will produce:</span><br><span class="line">               <span class="number">10.2</span><span class="number">.0</span><span class="number">.100</span>/<span class="number">32</span></span><br><span class="line">               <span class="number">10.2</span><span class="number">.10</span><span class="number">.100</span>/<span class="number">32</span></span><br><span class="line"></span><br><span class="line">       Note   in   the  above  examples  the  use  of  both  ADDRESS_BASE  and</span><br><span class="line">       ADDRESS_BASE_SUB required braces (&#123;&#125;) since  the  parameters  were  not</span><br><span class="line">       followed  by  whitespace  (<span class="keyword">after</span>  the first substitution which produced</span><br><span class="line">       <span class="number">10.2</span>.$&#123;ADDRESS_BASE_SUB&#125;.<span class="number">100</span>/<span class="number">32</span> the parameter is still not followed  by</span><br><span class="line">       whitespace).</span><br><span class="line"></span><br><span class="line">       If  a  parameter is not defined, it will not be replaced at all, so <span class="keyword">for</span></span><br><span class="line">       example $&#123;UNDEF_PARAMETER&#125; will remain in the configuration  <span class="keyword">if</span>  it  is</span><br><span class="line">       undefined;  this  means that existing configuration that contains a '$'</span><br><span class="line">       character (<span class="keyword">for</span> example in a script definition) will not be  changed  so</span><br><span class="line">       long as no new parameter definitions are added to the configuration.</span><br><span class="line"></span><br><span class="line">       Parameter substitution works in conjunction with conditional configura-</span><br><span class="line">       tion.  For example:</span><br><span class="line"></span><br><span class="line">           @main $PRIORITY=<span class="number">240</span></span><br><span class="line">           @backup $PRIORITY=<span class="number">200</span></span><br><span class="line">           ...</span><br><span class="line">           vrrp_instance VI_0 &#123;</span><br><span class="line">               priority $PRIORITY</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           will produce:</span><br><span class="line">               ...</span><br><span class="line">               vrrp_instance VI_0 &#123;</span><br><span class="line">                   priority <span class="number">240</span></span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">if</span> the config_id is main.</span><br><span class="line"></span><br><span class="line">           $IF_MAIN=@main</span><br><span class="line">           $IF_MAIN priority <span class="number">240</span></span><br><span class="line"></span><br><span class="line">           will produce:</span><br><span class="line">               priority <span class="number">240</span></span><br><span class="line">               <span class="keyword">if</span> the config_id is main and nothing <span class="keyword">if</span> the config_id is not main,</span><br><span class="line">               although why anyone would want to use this rather than simply the</span><br><span class="line">               following is not known (but still possible):</span><br><span class="line">                   @main priority <span class="number">240</span></span><br><span class="line"></span><br><span class="line">       Multiline definitions are also supported, but when used there  must  be</span><br><span class="line">       nothing on the line <span class="keyword">after</span> the parameter name. A multiline definition is</span><br><span class="line">       specified by ending each line except the last with a '\' character.</span><br><span class="line"></span><br><span class="line">       Example:</span><br><span class="line">           $INSTANCE= \</span><br><span class="line">           vrrp_instance VI_$&#123;NUM&#125; &#123; \</span><br><span class="line">               interface eth0.$&#123;NUM&#125; \</span><br><span class="line">               use_vmac vrrp$&#123;NUM&#125;.<span class="number">1</span> \</span><br><span class="line">               virtual_router_id <span class="number">1</span> \</span><br><span class="line">               @high priority <span class="number">130</span> \</span><br><span class="line">               @low priority <span class="number">120</span> \</span><br><span class="line">               advert_int <span class="number">1</span> \</span><br><span class="line">               virtual_ipaddress &#123; \</span><br><span class="line">                   <span class="number">10.0</span>.$&#123;NUM&#125;.<span class="number">254</span>/<span class="number">24</span> \</span><br><span class="line">               &#125; \</span><br><span class="line">               track_script &#123; \</span><br><span class="line">                   offset_instance_$&#123;NUM&#125; \</span><br><span class="line">               &#125; \</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           $NUM=<span class="number">0</span></span><br><span class="line">           $INSTANCE</span><br><span class="line"></span><br><span class="line">           $NUM=<span class="number">1</span></span><br><span class="line">           $INSTANCE</span><br><span class="line"></span><br><span class="line">       The use of multiline definitions can be nested.</span><br><span class="line"></span><br><span class="line">       Example:</span><br><span class="line">           $RS= \</span><br><span class="line">           real_server <span class="number">192.168</span>.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125; <span class="number">80</span> &#123; \</span><br><span class="line">               weight <span class="number">1</span> \</span><br><span class="line">               inhibit_on_failure \</span><br><span class="line">               smtp_alert \</span><br><span class="line">               MISC_CHECK &#123; \</span><br><span class="line">                   misc_path <span class="string">"$&#123;_PWD&#125;/scripts/vs.sh RS_misc.$&#123;INST&#125;.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125;.0 10.0.$&#123;VS_NUM&#125;.4:80-&gt;192.168.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125;:80"</span> \</span><br><span class="line">               &#125; \</span><br><span class="line"></span><br><span class="line">               MISC_CHECK &#123; \</span><br><span class="line">                   misc_path <span class="string">"$&#123;_PWD&#125;/scripts/vs.sh RS_misc.$&#123;INST&#125;.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125;.1 10.0.$&#123;VS_NUM&#125;.4:80-&gt;192.168.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125;:80"</span> \</span><br><span class="line">               &#125; \</span><br><span class="line"></span><br><span class="line">               notify_up <span class="string">"$&#123;_PWD&#125;/scripts/notify.sh RS_notify.$&#123;INST&#125;.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125; UP 10.0.$&#123;VS_NUM&#125;.4:80-&gt;192.168.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125;:80"</span> \</span><br><span class="line"></span><br><span class="line">               notify_down <span class="string">"$&#123;_PWD&#125;/scripts/notify.sh RS_notify.$&#123;INST&#125;.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125; DOWN 10.0.$&#123;VS_NUM&#125;.4:80-&gt;192.168.$&#123;VS_NUM&#125;.$&#123;RS_NUM&#125;:80"</span> \</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           $VS= \</span><br><span class="line">           virtual_server <span class="number">10.0</span>.$&#123;VS_NUM&#125;.<span class="number">4</span> <span class="number">80</span> &#123; \</span><br><span class="line">               quorum <span class="number">2</span> \</span><br><span class="line">               quorum_up <span class="string">"$&#123;_PWD&#125;/scripts/notify.sh VS_notify.$&#123;INST&#125; UP 10.0.$&#123;VS_NUM&#125;.4:80"</span> \</span><br><span class="line">               quorum_down <span class="string">"$&#123;_PWD&#125;/scripts/notify.sh VS_notify.$&#123;INST&#125; DOWN 10.0.$&#123;VS_NUM&#125;.4:80"</span> \</span><br><span class="line">               $RS_NUM=<span class="number">1</span> \</span><br><span class="line">               $RS \</span><br><span class="line">               $RS_NUM=<span class="number">2</span> \</span><br><span class="line">               $RS \</span><br><span class="line">               $RS_NUM=<span class="number">3</span> \</span><br><span class="line">               $RS \</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           $VS_NUM=<span class="number">0</span></span><br><span class="line">           $ALPHA=alpha</span><br><span class="line">           $VS</span><br><span class="line"></span><br><span class="line">           $VS_NUM=<span class="number">1</span></span><br><span class="line">           $ALPHA=</span><br><span class="line">           $VS</span><br><span class="line"></span><br><span class="line">       The above will create <span class="number">2</span> virtual servers, each with <span class="number">3</span> real servers</span><br><span class="line"></span><br><span class="line">Pre-defined definitions</span><br><span class="line">       The following pre-defined definitions are defined:</span><br><span class="line"></span><br><span class="line">       $&#123;_PWD&#125; : The directory of the  current  configuration</span><br><span class="line">       <span class="keyword">file</span> (this can be changed <span class="keyword">if</span> using the include directive).</span><br><span class="line">       $&#123;_INSTANCE&#125; : The instance name (as defined by the -i</span><br><span class="line">       option, defaults to hostname).</span><br><span class="line">       $&#123;_RANDOM  [MIN [MAX]]&#125; : This is replaced by a random</span><br><span class="line">       integer in the range [MIN, MAX], where MIN and MAX  are  optional  non-</span><br><span class="line">       negative integers. Defaults are MIN=<span class="number">0</span> and MAX=<span class="number">32767.</span></span><br><span class="line"></span><br><span class="line">       Additional pre-defined definitions will be added as their need is iden-</span><br><span class="line">       tified.   It  will  normally be quite straightforward to add additional</span><br><span class="line">       pre-defined definitions, so <span class="keyword">if</span> you need one, or have a  good  idea  <span class="keyword">for</span></span><br><span class="line">       one,          then          raise          an          issue         at</span><br><span class="line">       https://github.com/acassen/keepalived/issues requesting it.</span><br><span class="line"></span><br><span class="line">Sequence blocks</span><br><span class="line">       A line starting ~SEQ(var, start, step, end) will cause the remainder of</span><br><span class="line">       the line to be processed multiple times, with  the  <span class="keyword">variable</span>  $var  <span class="keyword">set</span></span><br><span class="line">       initially  to  start, and then $var will be incremented by step repeat-</span><br><span class="line">       edly, terminating when it is greater than end. step may be omitted,  in</span><br><span class="line">       which  case it defaults to <span class="number">1</span> or <span class="number">-1</span>, depending on whether end is greater</span><br><span class="line">       or less than start. start  may  also  be  omitted,  in  which  case  it</span><br><span class="line">       defaults to <span class="number">1</span> <span class="keyword">if</span> end &gt; <span class="number">0</span> or <span class="number">-1</span> <span class="keyword">if</span> end &lt; <span class="number">0.</span> so, <span class="keyword">for</span> example:</span><br><span class="line"></span><br><span class="line">           ~SEQ(SUBNET, <span class="number">0</span>, <span class="number">3</span>) ip_address <span class="number">10.0</span>.$SUBNET.<span class="number">1</span></span><br><span class="line"></span><br><span class="line">           would produce:</span><br><span class="line">               ip_address <span class="number">10.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">               ip_address <span class="number">10.0</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">               ip_address <span class="number">10.0</span><span class="number">.2</span><span class="number">.1</span></span><br><span class="line">               ip_address <span class="number">10.0</span><span class="number">.3</span><span class="number">.1</span></span><br><span class="line"></span><br><span class="line">       There can be multiple ~SEQ elements on a line, so <span class="keyword">for</span> example:</span><br><span class="line"></span><br><span class="line">           $VI4= \</span><br><span class="line">           vrrp_track_file offset_instance_4.$&#123;IF&#125;.$&#123;NUM&#125;.$&#123;ID&#125; &#123; \</span><br><span class="line">               <span class="keyword">file</span> <span class="string">"$&#123;_PWD&#125;/679/track_files/4.$&#123;IF&#125;.$&#123;NUM&#125;.$&#123;ID&#125;"</span> \</span><br><span class="line">               weight <span class="number">-100</span> \</span><br><span class="line">           &#125; \</span><br><span class="line">           vrrp_instance vrrp4.$&#123;IF&#125;.$&#123;NUM&#125;.$&#123;ID&#125; &#123; \</span><br><span class="line">               interface bond$&#123;IF&#125;.$&#123;NUM&#125; \</span><br><span class="line">               use_vmac vrrp4.$&#123;IF&#125;.$&#123;NUM&#125;.$&#123;ID&#125; \</span><br><span class="line">               virtual_router_id $&#123;ID&#125; \</span><br><span class="line">               priority <span class="number">130</span> \</span><br><span class="line">               virtual_ipaddress &#123; \</span><br><span class="line">                   <span class="number">10.</span>$&#123;IF&#125;.$&#123;NUM&#125;.$&#123;ID&#125;/<span class="number">24</span> \</span><br><span class="line">               &#125; \</span><br><span class="line">               track_file &#123; \</span><br><span class="line">                   offset_instance_4.$&#123;IF&#125;.$&#123;NUM&#125;.$&#123;ID&#125; \</span><br><span class="line">               &#125; \</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           ~SEQ(IF,<span class="number">0</span>,<span class="number">7</span>) ~SEQ(NUM,<span class="number">0</span>,<span class="number">31</span>) ~SEQ(ID,<span class="number">1</span>,<span class="number">254</span>) $VI4</span><br><span class="line"></span><br><span class="line">           will produce <span class="number">65024</span> vrrp instances with names from vrrp4<span class="number">.0</span><span class="number">.0</span><span class="number">.1</span> through to</span><br><span class="line">           vrrp4<span class="number">.7</span><span class="number">.31</span><span class="number">.254</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">AUTHORS</span><br><span class="line">       Initial by Joseph Mack. Extensive updates by Alexandre Cassen &amp; Quentin</span><br><span class="line">       Armitage.</span><br><span class="line"></span><br><span class="line">SEE ALSO</span><br><span class="line">       ipvsadm(<span class="number">8</span>), ip --help.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Keepalived                        <span class="number">2018</span><span class="number">-11</span><span class="number">-08</span>                keepalived.conf(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

        
        <br>
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>
    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        
        <li>
            <a target="_blank" href="https://www.zhihu.com/people/li-bo-2-25">
                            <span class="fa-stack fa-lg">
                                 <i class="iconfont icon-zhihu"></i>
                            </span>
            </a>
        </li>
        

        

        

        
        <li>
            <a target="_blank" href="https://github.com/liboo0731">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://www.cnblogs.com/liboo/">H2K1R~ACE_博客园</a></span>
        <span>/</span>
        
        <span><a href="https://blog.csdn.net/weixin_40108079">H2K1E~ACE_CSDN</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


    <script>
        /**
         *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
         *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
        */
        if( '' || '')
        var disqus_config = function () {
            this.page.url = '';  // Replace PAGE_URL with your page's canonical URL variable
            this.page.identifier = ''; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };

        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://airclouds-blog.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>

</html>
